<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LooPin - Pi„ÇíÂæ™Áí∞„Åï„Åõ„ÇãÈù©Êñ∞„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†</title>
    <meta name="description" content="Pi„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„ÅÆÊúÄÊñ∞ÊÉÖÂ†±„Çí„É™„Ç¢„É´„Çø„Ç§„É†„ÅßÈÖç‰ø°„ÄÇ‰ø°ÊÜëÊÄßÊäïÁ•®„ÇÑ„Ç≥„É°„É≥„Éà„ÅßPi„ÇíÁç≤Âæó„Åß„Åç„ÇãÈù©Êñ∞„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†">
    
    <!-- Open Graph -->
    <meta property="og:title" content="LooPin - Pi„ÇíÂæ™Áí∞„Åï„Åõ„ÇãÈù©Êñ∞„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†">
    <meta property="og:description" content="Pi„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„ÅÆÊúÄÊñ∞ÊÉÖÂ†±„Çí„É™„Ç¢„É´„Çø„Ç§„É†„ÅßÈÖç‰ø°">
    <meta property="og:type" content="website">
    <meta property="og:image" content="https://your-domain.com/og-image.jpg">
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="LooPin - Pi„ÇíÂæ™Áí∞„Åï„Åõ„ÇãÈù©Êñ∞„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†">
    <meta name="twitter:description" content="Pi„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„ÅÆÊúÄÊñ∞ÊÉÖÂ†±„Çí„É™„Ç¢„É´„Çø„Ç§„É†„ÅßÈÖç‰ø°">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-storage-compat.js"></script>
    
    <!-- Pi SDK -->
    <script src="https://sdk.minepi.com/pi-sdk.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Custom CSS -->
    <style>
        /* „Ç´„Çπ„Çø„É†CSS */
        :root {
            --loopin-primary: #FF6B6B;
            --loopin-secondary: #4ECDC4;
            --loopin-accent: #FFE66D;
            --loopin-dark: #1A535C;
            --loopin-light: #F7FFF7;
        }

        body {
            background: linear-gradient(135deg, #1A535C 0%, #0A2E36 100%);
            color: var(--loopin-light);
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            overflow-x: hidden;
        }

        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .gradient-btn-primary {
            background: linear-gradient(135deg, var(--loopin-primary) 0%, #FF5252 100%);
        }

        .gradient-btn-secondary {
            background: linear-gradient(135deg, var(--loopin-secondary) 0%, #26A69A 100%);
        }

        .gradient-btn-accent {
            background: linear-gradient(135deg, var(--loopin-accent) 0%, #FFD54F 100%);
        }

        .loopin-logo {
            font-weight: 800;
            background: linear-gradient(135deg, var(--loopin-primary) 0%, var(--loopin-secondary) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .loopin-tabs {
            display: flex;
            gap: 1rem;
            overflow-x: auto;
            padding-bottom: 0.5rem;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .loopin-tabs::-webkit-scrollbar {
            display: none;
        }

        .loopin-tab {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.25rem;
            padding: 0.75rem 1rem;
            border-radius: 1rem;
            color: rgba(255, 255, 255, 0.6);
            transition: all 0.3s ease;
            white-space: nowrap;
            min-width: 80px;
        }

        .loopin-tab.active {
            background: rgba(255, 107, 107, 0.2);
            color: var(--loopin-primary);
            font-weight: 600;
        }

        .loopin-tab i {
            font-size: 1.25rem;
        }

        .loopin-balance {
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(10px);
        }

        .smooth-transition {
            transition: all 0.3s ease;
        }

        .text-loopin-primary {
            color: var(--loopin-primary);
        }

        .text-loopin-secondary {
            color: var(--loopin-secondary);
        }

        .text-loopin-accent {
            color: var(--loopin-accent);
        }

        .post-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .post-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0, 0, 0, 0.2);
        }

        .topic-tag {
            transition: all 0.3s ease;
        }

        .topic-tag:hover {
            transform: scale(1.05);
        }

        .category-tag {
            transition: all 0.3s ease;
        }

        .category-tag:hover {
            transform: scale(1.05);
        }

        .category-tag.update {
            background: rgba(255, 107, 107, 0.2);
        }

        .category-tag.price {
            background: rgba(78, 205, 196, 0.2);
        }

        .category-tag.partnership {
            background: rgba(255, 230, 109, 0.2);
        }

        .category-tag.community {
            background: rgba(106, 130, 251, 0.2);
        }

        .loopin-hero {
            background: linear-gradient(135deg, rgba(255, 107, 107, 0.2) 0%, rgba(78, 205, 196, 0.2) 100%);
            padding: 3rem;
            text-align: center;
            border-radius: 1.5rem;
        }

        .loopin-hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .credibility-meter {
            width: 100%;
            height: 0.75rem;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 9999px;
            overflow: hidden;
        }

        .credibility-fill {
            height: 100%;
            border-radius: 9999px;
            transition: width 0.5s ease;
        }

        .credibility-high {
            background: linear-gradient(90deg, #4CAF50 0%, #8BC34A 100%);
        }

        .credibility-medium {
            background: linear-gradient(90deg, #FFC107 0%, #FFEB3B 100%);
        }

        .credibility-low {
            background: linear-gradient(90deg, #F44336 0%, #FF5252 100%);
        }

        .spinner {
            width: 3rem;
            height: 3rem;
            border: 0.25rem solid rgba(255, 255, 255, 0.2);
            border-top-color: var(--loopin-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .pi-counter {
            font-variant-numeric: tabular-nums;
        }

        .dopamine-trigger {
            position: relative;
            overflow: hidden;
        }

        .dopamine-trigger::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #ff0080, #ff8c00, #40e0d0, #ff0080);
            border-radius: inherit;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s;
            background-size: 400%;
            animation: gradient 15s ease infinite;
        }

        .dopamine-trigger:hover::before {
            opacity: 0.7;
        }

        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .loopin-pi-coin {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* „ÉÅ„É£„ÉÉ„ÉàÈñ¢ÈÄ£„Çπ„Çø„Ç§„É´ */
        .chat-container {
            height: calc(100vh - 200px);
            display: flex;
            flex-direction: column;
        }

        .chat-sidebar {
            width: 250px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 1rem;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
        }

        .chat-sidebar::-webkit-scrollbar {
            width: 6px;
        }

        .chat-sidebar::-webkit-scrollbar-track {
            background: transparent;
        }

        .chat-sidebar::-webkit-scrollbar-thumb {
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
        }

        .chat-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 1rem;
            overflow: hidden;
        }

        .chat-header {
            padding: 1rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
        }

        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: transparent;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
        }

        .chat-input-container {
            padding: 1rem;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .chat-room-item {
            padding: 0.75rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .chat-room-item:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .chat-room-item.active {
            background: rgba(255, 107, 107, 0.2);
        }

        .chat-room-admin-controls {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            display: flex;
            gap: 0.25rem;
        }

        .chat-room-admin-btn {
            width: 1.5rem;
            height: 1.5rem;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .chat-room-admin-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .chat-message {
            margin-bottom: 1rem;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chat-message-own {
            text-align: right;
        }

        .chat-message-bubble {
            display: inline-block;
            padding: 0.75rem 1rem;
            border-radius: 1rem;
            max-width: 70%;
            text-align: left;
        }

        .chat-message-own .chat-message-bubble {
            background: var(--loopin-primary);
            color: white;
        }

        .chat-message-other .chat-message-bubble {
            background: rgba(255, 255, 255, 0.1);
        }

        .chat-typing-indicator {
            display: flex;
            align-items: center;
            padding: 0.5rem;
        }

        .chat-typing-indicator span {
            height: 0.5rem;
            width: 0.5rem;
            background: rgba(255, 255, 255, 0.5);
            border-radius: 50%;
            margin: 0 0.125rem;
            animation: typing 1.4s infinite;
        }

        .chat-typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .chat-typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-0.5rem);
            }
        }

        /* „Ç∑„Éß„Éº„ÉàÂãïÁîª„Çπ„Çø„Ç§„É´ */
        .reel-container {
            height: calc(100vh - 200px);
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            scrollbar-width: none;
            -ms-overflow-style: none;
        }

        .reel-container::-webkit-scrollbar {
            display: none;
        }

        .reel-item {
            height: 100vh;
            scroll-snap-align: start;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .reel-video {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .reel-overlay {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 2rem;
            background: linear-gradient(to top, rgba(0, 0, 0, 0.8), transparent);
            color: white;
        }

        .reel-actions {
            position: absolute;
            right: 1rem;
            bottom: 8rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }

        .reel-action-btn {
            width: 3rem;
            height: 3rem;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .reel-action-btn:hover {
            transform: scale(1.1);
            background: rgba(255, 255, 255, 0.3);
        }

        .reel-action-btn.active {
            color: var(--loopin-primary);
        }

        .reel-upload-btn {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 4rem;
            height: 4rem;
            border-radius: 50%;
            background: var(--loopin-primary);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.4);
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 40;
        }

        .reel-upload-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 16px rgba(255, 107, 107, 0.6);
        }

        /* „Éó„É≠„Éï„Ç£„Éº„É´Á∑®ÈõÜ„Çπ„Çø„Ç§„É´ */
        .profile-edit-container {
            max-width: 4xl;
            margin: 0 auto;
        }

        .profile-avatar-upload {
            position: relative;
            width: 150px;
            height: 150px;
            margin: 0 auto 1rem;
        }

        .profile-avatar-upload img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid rgba(255, 255, 255, 0.2);
        }

        .profile-avatar-upload .upload-btn {
            position: absolute;
            bottom: 0;
            right: 0;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--loopin-primary);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .profile-form-group {
            margin-bottom: 1.5rem;
        }

        .profile-form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .profile-form-group input,
        .profile-form-group textarea {
            width: 100%;
            padding: 0.75rem 1rem;
            border-radius: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
            transition: all 0.3s ease;
        }

        .profile-form-group input:focus,
        .profile-form-group textarea:focus {
            outline: none;
            border-color: var(--loopin-primary);
            box-shadow: 0 0 0 3px rgba(255, 107, 107, 0.2);
        }

        .profile-form-group textarea {
            resize: vertical;
            min-height: 100px;
        }

        /* „Éï„Ç©„É≠„ÉºÊ©üËÉΩ„Çπ„Çø„Ç§„É´ */
        .follow-btn {
            padding: 0.5rem 1rem;
            border-radius: 9999px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .follow-btn.not-following {
            background: var(--loopin-primary);
            color: white;
        }

        .follow-btn.not-following:hover {
            background: #FF5252;
        }

        .follow-btn.following {
            background: rgba(255, 255, 255, 0.2);
            color: white;
        }

        .follow-btn.following:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .user-card {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            border-radius: 1rem;
            background: rgba(255, 255, 255, 0.05);
            transition: all 0.3s ease;
        }

        .user-card:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .user-card img {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }

        .user-card-info {
            flex: 1;
        }

        .user-card-info h4 {
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .user-card-info p {
            font-size: 0.875rem;
            color: rgba(255, 255, 255, 0.7);
        }

        /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ„Éá„Ç∂„Ç§„É≥ */
        @media (max-width: 768px) {
            .loopin-hero h1 {
                font-size: 2rem;
            }
            
            .chat-container {
                height: calc(100vh - 180px);
            }
            
            .chat-sidebar {
                width: 200px;
            }
        }
    </style>
</head>
<body class="text-gray-900">
    <!-- Ë®ÄË™ûÈÅ∏Êäû„Ç™„Éº„Éê„Éº„É¨„Ç§ -->
    <div id="langOverlay" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4">
        <div class="glass-effect rounded-3xl p-8 max-w-md w-full">
            <div class="text-center mb-6">
                <h2 class="loopin-logo text-4xl mb-2">LooPin</h2>
                <p class="text-white/80">Pi„ÇíÂæ™Áí∞„Åï„Åõ„ÇãÈù©Êñ∞„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†</p>
            </div>
            <h3 class="text-xl font-bold text-white mb-6 text-center">Ë®ÄË™û„ÇíÈÅ∏Êäû</h3>
            <div class="grid grid-cols-3 gap-3 max-h-96 overflow-y-auto">
                <button onclick="selectLanguage('ja')" class="glass-effect rounded-xl p-3 text-white hover:bg-white/20 smooth-transition">
                    üáØüáµ Êó•Êú¨Ë™û
                </button>
                <button onclick="selectLanguage('en')" class="glass-effect rounded-xl p-3 text-white hover:bg-white/20 smooth-transition">
                    üá∫üá∏ English
                </button>
                <button onclick="selectLanguage('zh')" class="glass-effect rounded-xl p-3 text-white hover:bg-white/20 smooth-transition">
                    üá®üá≥ ‰∏≠Êñá
                </button>
                <button onclick="selectLanguage('ko')" class="glass-effect rounded-xl p-3 text-white hover:bg-white/20 smooth-transition">
                    üá∞üá∑ ÌïúÍµ≠Ïñ¥
                </button>
                <button onclick="selectLanguage('es')" class="glass-effect rounded-xl p-3 text-white hover:bg-white/20 smooth-transition">
                    üá™üá∏ Espa√±ol
                </button>
                <button onclick="selectLanguage('fr')" class="glass-effect rounded-xl p-3 text-white hover:bg-white/20 smooth-transition">
                    üá´üá∑ Fran√ßais
                </button>
            </div>
        </div>
    </div>
    
    <!-- PiË™çË®º„Ç™„Éº„Éê„Éº„É¨„Ç§ -->
    <div id="authOverlay" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center p-4 hidden">
        <div class="glass-effect rounded-3xl p-8 max-w-md w-full">
            <div class="text-center mb-6">
                <div class="w-20 h-20 gradient-btn-primary rounded-2xl flex items-center justify-center mx-auto mb-4">
                    <i class="fas fa-infinity text-white text-3xl"></i>
                </div>
                <h2 class="loopin-logo text-3xl mb-2">LooPin</h2>
                <p class="text-white/80">Pi„Ç¢„Ç´„Ç¶„É≥„Éà„Åß„É≠„Ç∞„Ç§„É≥</p>
            </div>
            
            <div id="authContent">
                <button onclick="authenticatePi()" class="w-full gradient-btn-primary text-white font-semibold py-4 rounded-2xl hover:shadow-lg smooth-transition mb-4">
                    <i class="fas fa-wallet mr-2"></i>
                    Pi„Ç¶„Ç©„É¨„ÉÉ„Éà„ÅßË™çË®º
                </button>
                
                <div class="text-center">
                    <p class="text-white/60 text-sm">
                        Ë™çË®º„Åô„Çã„Åì„Å®„Åß„ÄÅ
                        <a href="#" class="text-loopin-primary hover:underline">Âà©Áî®Ë¶èÁ¥Ñ</a>
                        „Å®
                        <a href="#" class="text-loopin-primary hover:underline">„Éó„É©„Ç§„Éê„Ç∑„Éº„Éù„É™„Ç∑„Éº</a>
                        „Å´ÂêåÊÑè„Åó„Åü„Åì„Å®„Å´„Å™„Çä„Åæ„Åô„ÄÇ
                    </p>
                </div>
            </div>
            
            <div id="authLoading" class="hidden text-center">
                <div class="spinner mx-auto mb-4"></div>
                <p class="text-white/80">Ë™çË®º‰∏≠...</p>
            </div>
        </div>
    </div>
    
    <!-- „É°„Ç§„É≥„Ç≥„É≥„ÉÜ„Éä -->
    <div id="mainContainer" class="hidden">
        <!-- „Éò„ÉÉ„ÉÄ„Éº -->
        <header class="glass-effect sticky top-0 z-40 px-4 py-3">
            <div class="max-w-7xl mx-auto flex items-center justify-between">
                <div class="flex items-center gap-3">
                    <div class="w-12 h-12 gradient-btn-primary rounded-2xl flex items-center justify-center shadow-lg">
                        <i class="fas fa-infinity text-white text-xl"></i>
                    </div>
                    <h1 class="loopin-logo text-2xl">LooPin</h1>
                </div>
                
                <div class="flex items-center gap-4">
                    <!-- PiÊÆãÈ´òË°®Á§∫ -->
                    <div class="loopin-balance rounded-full px-4 py-2 flex items-center gap-2">
                        <i class="fas fa-coins text-yellow-400"></i>
                        <span class="text-white font-semibold pi-counter" id="piBalance">0.00</span>
                        <span class="text-white/70 text-sm">testPi</span>
                    </div>
                    
                    <!-- Ë®ÄË™ûÂàá„ÇäÊõø„Åà -->
                    <button onclick="toggleLangSelector()" class="glass-effect rounded-full p-2 text-white hover:bg-white/20">
                        <i class="fas fa-globe"></i>
                    </button>
                    
                    <!-- „Éó„É≠„Éï„Ç£„Éº„É´ -->
                    <button onclick="showProfile()" class="w-10 h-10 rounded-full overflow-hidden border-2 border-white/30 hover:scale-110 smooth-transition">
                        <img id="userAvatar" src="https://picsum.photos/seed/user/40/40.jpg" alt="Profile">
                    </button>
                </div>
            </div>
        </header>
        
        <!-- LooPin„Çø„Éñ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ -->
        <nav class="sticky top-16 z-30 px-4 py-3">
            <div class="max-w-7xl mx-auto">
                <div class="loopin-tabs">
                    <button onclick="switchTab('feed')" class="loopin-tab active" data-tab="feed">
                        <i class="fas fa-home"></i>
                        <span>„Éï„Ç£„Éº„Éâ</span>
                    </button>
                    <button onclick="switchTab('reels')" class="loopin-tab" data-tab="reels">
                        <i class="fas fa-play-circle"></i>
                        <span>„Ç∑„Éß„Éº„Éà</span>
                    </button>
                    <button onclick="switchTab('topics')" class="loopin-tab" data-tab="topics">
                        <i class="fas fa-hashtag"></i>
                        <span>„Éà„Éî„ÉÉ„ÇØ</span>
                    </button>
                    <button onclick="switchTab('news')" class="loopin-tab" data-tab="news">
                        <i class="fas fa-newspaper"></i>
                        <span>„Éã„É•„Éº„Çπ</span>
                    </button>
                    <button onclick="switchTab('chat')" class="loopin-tab" data-tab="chat">
                        <i class="fas fa-comments"></i>
                        <span>„ÉÅ„É£„ÉÉ„Éà</span>
                    </button>
                </div>
            </div>
        </nav>
        
        <!-- „Éï„Ç£„Éº„Éâ„Çø„Éñ -->
        <div id="feedTab" class="tab-content max-w-7xl mx-auto p-4">
            <!-- ÊäïÁ®ø‰ΩúÊàê„Ç®„É™„Ç¢ -->
            <div class="glass-effect rounded-3xl p-6 mb-6">
                <div class="flex items-start gap-4">
                    <img src="https://picsum.photos/seed/user/40/40.jpg" alt="User" class="w-12 h-12 rounded-full">
                    <div class="flex-1">
                        <textarea 
                            id="postInput"
                            placeholder="testPi„ÇíÁç≤Âæó„Åô„Çã„Åü„ÇÅ„Å´ÊäïÁ®ø„Åó„Çà„ÅÜ... „Ç§„É≥„Éó„É¨„ÉÉ„Ç∑„Éß„É≥„ÇÑ„Ç®„É≥„Ç≤„Éº„Ç∏„É°„É≥„Éà„ÅßtestPi„Åå„ÇÇ„Çâ„Åà„Åæ„ÅôÔºÅ"
                            class="w-full glass-effect rounded-2xl p-4 text-white placeholder-white/50 resize-none focus:outline-none focus:ring-2 focus:ring-loopin-primary"
                            rows="3"
                        ></textarea>
                        <div class="flex items-center justify-between mt-4">
                            <div class="flex gap-2">
                                <button class="glass-effect rounded-xl p-2 text-white hover:bg-white/20">
                                    <i class="fas fa-image"></i>
                                </button>
                                <button class="glass-effect rounded-xl p-2 text-white hover:bg-white/20">
                                    <i class="fas fa-poll"></i>
                                </button>
                                <button class="glass-effect rounded-xl p-2 text-white hover:bg-white/20">
                                    <i class="fas fa-gift"></i>
                                </button>
                            </div>
                            <button onclick="createPost()" class="gradient-btn-primary text-white font-semibold px-6 py-2 rounded-xl hover:shadow-lg smooth-transition">
                                ÊäïÁ®ø„Åô„Çã
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- „Éá„Ç§„É™„Éº„Éü„ÉÉ„Ç∑„Éß„É≥ -->
            <div class="glass-effect rounded-3xl p-6 mb-6 dopamine-trigger">
                <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                    <i class="fas fa-tasks text-yellow-400"></i>
                    „Éá„Ç§„É™„Éº„Éü„ÉÉ„Ç∑„Éß„É≥
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="glass-effect rounded-2xl p-4 border border-yellow-400/30">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-white font-medium">3ÂõûÊäïÁ®ø</span>
                            <span class="text-yellow-400 font-bold">+5 testPi</span>
                        </div>
                        <div class="w-full bg-white/20 rounded-full h-2">
                            <div class="bg-yellow-400 h-2 rounded-full" style="width: 33%"></div>
                        </div>
                    </div>
                    <div class="glass-effect rounded-2xl p-4 border border-blue-400/30">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-white font-medium">10Âõû„ÅÑ„ÅÑ„Å≠</span>
                            <span class="text-blue-400 font-bold">+3 testPi</span>
                        </div>
                        <div class="w-full bg-white/20 rounded-full h-2">
                            <div class="bg-blue-400 h-2 rounded-full" style="width: 70%"></div>
                        </div>
                    </div>
                    <div class="glass-effect rounded-2xl p-4 border border-purple-400/30">
                        <div class="flex items-center justify-between mb-2">
                            <span class="text-white font-medium">5Âõû„Ç≥„É°„É≥„Éà</span>
                            <span class="text-purple-400 font-bold">+4 testPi</span>
                        </div>
                        <div class="w-full bg-white/20 rounded-full h-2">
                            <div class="bg-purple-400 h-2 rounded-full" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- „Éï„Ç£„Éº„Éâ -->
            <div class="space-y-4" id="feed">
                <!-- ÊäïÁ®ø„Ç´„Éº„Éâ„Çµ„É≥„Éó„É´ -->
                <div class="post-card glass-effect rounded-3xl p-6">
                    <div class="flex items-start gap-4 mb-4">
                        <img src="https://picsum.photos/seed/user1/40/40.jpg" alt="User" class="w-10 h-10 rounded-full">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-1">
                                <h4 class="font-semibold text-white">Â±±Áî∞Â§™ÈÉé</h4>
                                <span class="text-xs text-white/60">2ÂàÜÂâç</span>
                            </div>
                            <p class="text-white/90 mb-4">LooPin„ÅßÂàù„ÇÅ„Å¶testPi„ÇíÁç≤Âæó„Åó„Åæ„Åó„ÅüÔºÅÊäïÁ®ø„Åô„Çã„Å†„Åë„Åß„ÅÑ„ÅÑ„Å™„Çì„Å¶Á∞°Âçò„Åô„Åé„ÇãÔºÅ„Åø„Çì„Å™„ÇÇ„ÇÑ„Å£„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑÔºÅ</p>
                            
                            <!-- „Ç®„É≥„Ç≤„Éº„Ç∏„É°„É≥„Éà„É°„Éà„É™„ÇØ„Çπ -->
                            <div class="flex items-center gap-6 text-white/70">
                                <button onclick="likePost(this)" class="flex items-center gap-2 hover:text-red-400 smooth-transition">
                                    <i class="far fa-heart"></i>
                                    <span>42</span>
                                </button>
                                <button onclick="showComments()" class="flex items-center gap-2 hover:text-blue-400 smooth-transition">
                                    <i class="far fa-comment"></i>
                                    <span>8</span>
                                </button>
                                <button onclick="retweetPost(this)" class="flex items-center gap-2 hover:text-green-400 smooth-transition">
                                    <i class="fas fa-retweet"></i>
                                    <span>5</span>
                                </button>
                                <button class="flex items-center gap-2 hover:text-yellow-400 smooth-transition">
                                    <i class="fas fa-coins text-yellow-400"></i>
                                    <span>2.5 testPi</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- ÁîªÂÉè‰ªò„ÅçÊäïÁ®ø -->
                <div class="post-card glass-effect rounded-3xl p-6">
                    <div class="flex items-start gap-4 mb-4">
                        <img src="https://picsum.photos/seed/user2/40/40.jpg" alt="User" class="w-10 h-10 rounded-full">
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-1">
                                <h4 class="font-semibold text-white">‰ΩêËó§Ëä±Â≠ê</h4>
                                <span class="text-xs text-white/60">15ÂàÜÂâç</span>
                            </div>
                            <p class="text-white/90 mb-4">‰ªäÊó•„ÅÆPi‰æ°Ê†º„ÅØ„Äá„ÄáÂÜÜ„Å†„Å£„Å¶ÔºÅ„Åø„Çì„Å™„Å©„ÅÜÊÄù„ÅÜÔºü‰ªäÂæå„ÅÆÂÄ§Âãï„Åç‰∫àÊÉ≥„ÇíÊïô„Åà„Å¶ÔºÅ</p>
                            
                            <!-- ÁîªÂÉè -->
                            <div class="rounded-2xl overflow-hidden mb-4">
                                <img src="https://picsum.photos/seed/pi-chart/600/400.jpg" alt="Chart" class="w-full">
                            </div>
                            
                            <div class="flex items-center gap-6 text-white/70">
                                <button onclick="likePost(this)" class="flex items-center gap-2 hover:text-red-400 smooth-transition">
                                    <i class="far fa-heart"></i>
                                    <span>128</span>
                                </button>
                                <button onclick="showComments()" class="flex items-center gap-2 hover:text-blue-400 smooth-transition">
                                    <i class="far fa-comment"></i>
                                    <span>34</span>
                                </button>
                                <button onclick="retweetPost(this)" class="flex items-center gap-2 hover:text-green-400 smooth-transition">
                                    <i class="fas fa-retweet"></i>
                                    <span>12</span>
                                </button>
                                <button class="flex items-center gap-2 hover:text-yellow-400 smooth-transition">
                                    <i class="fas fa-coins text-yellow-400"></i>
                                    <span>5.8 testPi</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- „Ç∑„Éß„Éº„Éà„É™„Éº„É´„Çø„Éñ -->
        <div id="reelsTab" class="tab-content hidden">
            <div class="reel-container" id="reelsContainer">
                <!-- „Ç∑„Éß„Éº„Éà„É™„Éº„É´„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅåÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Çã -->
            </div>
            
            <!-- ÂãïÁîª„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Éú„Çø„É≥ -->
            <button onclick="showReelUpload()" class="reel-upload-btn">
                <i class="fas fa-plus"></i>
            </button>
        </div>
        
        <!-- „Éà„Éî„ÉÉ„ÇØ„Çø„Éñ -->
        <div id="topicsTab" class="tab-content hidden max-w-7xl mx-auto p-4">
            <!-- „Éà„É¨„É≥„Éâ„Éà„Éî„ÉÉ„ÇØ -->
            <div class="glass-effect rounded-3xl p-6 mb-6">
                <h3 class="text-xl font-bold text-white mb-4 flex items-center gap-2">
                    <i class="fas fa-fire text-orange-400"></i>
                    „Éà„É¨„É≥„Éâ„Éà„Éî„ÉÉ„ÇØ
                </h3>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                    <button onclick="openTopicRoom('pi-price')" class="topic-tag glass-effect rounded-2xl p-4 text-left hover:bg-white/20">
                        <h4 class="font-semibold text-white mb-1">#Pi‰æ°Ê†º</h4>
                        <p class="text-sm text-white/60">1.2k ÊäïÁ®ø</p>
                    </button>
                    <button onclick="openTopicRoom('mining')" class="topic-tag glass-effect rounded-2xl p-4 text-left hover:bg-white/20">
                        <h4 class="font-semibold text-white mb-1">#„Éû„Ç§„Éã„É≥„Ç∞</h4>
                        <p class="text-sm text-white/60">856 ÊäïÁ®ø</p>
                    </button>
                    <button onclick="openTopicRoom('ecosystem')" class="topic-tag glass-effect rounded-2xl p-4 text-left hover:bg-white/20">
                        <h4 class="font-semibold text-white mb-1">#„Ç®„Ç≥„Ç∑„Çπ„ÉÜ„É†</h4>
                        <p class="text-sm text-white/60">642 ÊäïÁ®ø</p>
                    </button>
                    <button onclick="openTopicRoom('future')" class="topic-tag glass-effect rounded-2xl p-4 text-left hover:bg-white/20">
                        <h4 class="font-semibold text-white mb-1">#Êú™Êù•‰∫àÊ∏¨</h4>
                        <p class="text-sm text-white/60">523 ÊäïÁ®ø</p>
                    </button>
                </div>
            </div>
            
            <!-- „Åô„Åπ„Å¶„ÅÆ„Éà„Éî„ÉÉ„ÇØ -->
            <div class="glass-effect rounded-3xl p-6">
                <h3 class="text-xl font-bold text-white mb-4">„Åô„Åπ„Å¶„ÅÆ„Éà„Éî„ÉÉ„ÇØ</h3>
                <div class="space-y-3">
                    <div class="flex items-center justify-between glass-effect rounded-2xl p-4">
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center">
                                <i class="fas fa-chart-line text-white"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold text-white">Â∏ÇÂ†¥ÂàÜÊûê</h4>
                                <p class="text-sm text-white/60">234 ÊäïÁ®ø ¬∑ Ê¥ªÁô∫</p>
                            </div>
                        </div>
                        <button onclick="openTopicRoom('market')" class="glass-effect rounded-xl px-4 py-2 text-white hover:bg-white/20">
                            ÂèÇÂä†
                        </button>
                    </div>
                    <div class="flex items-center justify-between glass-effect rounded-2xl p-4">
                        <div class="flex items-center gap-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-teal-600 rounded-xl flex items-center justify-center">
                                <i class="fas fa-lightbulb text-white"></i>
                            </div>
                            <div>
                                <h4 class="font-semibold text-white">„Ç¢„Ç§„Éá„Ç¢‰∫§Êèõ</h4>
                                <p class="text-sm text-white/60">189 ÊäïÁ®ø</p>
                            </div>
                        </div>
                        <button onclick="openTopicRoom('ideas')" class="glass-effect rounded-xl px-4 py-2 text-white hover:bg-white/20">
                            ÂèÇÂä†
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- „Éã„É•„Éº„Çπ„Çø„Éñ -->
        <div id="newsTab" class="tab-content hidden max-w-7xl mx-auto p-4">
            <!-- LooPin„Éí„Éº„É≠„Éº„Çª„ÇØ„Ç∑„Éß„É≥ -->
            <div class="loopin-hero glass-effect rounded-3xl mb-8">
                <h1 class="loopin-logo">LooPin News</h1>
                <p class="text-xl">Pi„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„ÅÆÊúÄÊñ∞ÊÉÖÂ†±„Çí„É™„Ç¢„É´„Çø„Ç§„É†„ÅßÈÖç‰ø°</p>
                <div class="text-sm text-white/60">
                    <i class="fas fa-sync-alt mr-1"></i>
                    ÊúÄÁµÇÊõ¥Êñ∞: <span id="lastUpdate">--:--</span>
                </div>
            </div>
            
            <!-- Ê§úÁ¥¢„Éê„Éº -->
            <div class="glass-effect rounded-2xl p-4 mb-6">
                <div class="flex gap-3">
                    <div class="flex-1 relative">
                        <input 
                            type="text" 
                            id="newsSearch"
                            placeholder="„Éã„É•„Éº„Çπ„ÇíÊ§úÁ¥¢..."
                            class="w-full glass-effect rounded-2xl px-4 py-3 pl-12 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-loopin-primary"
                        >
                        <i class="fas fa-search absolute left-4 top-1/2 transform -translate-y-1/2 text-white/60"></i>
                    </div>
                    <button onclick="searchNews()" class="gradient-btn-primary text-white font-semibold px-6 py-3 rounded-xl hover:shadow-lg smooth-transition">
                        Ê§úÁ¥¢
                    </button>
                </div>
            </div>
            
            <!-- „Ç´„ÉÜ„Ç¥„É™„Éº„Éï„Ç£„É´„Çø„Éº -->
            <div class="glass-effect rounded-2xl p-4 mb-6">
                <div class="flex gap-2 overflow-x-auto pb-2">
                    <button onclick="filterNews('all')" class="category-tag rounded-full px-4 py-2 text-white text-sm whitespace-nowrap bg-white/20">
                        „Åô„Åπ„Å¶
                    </button>
                    <button onclick="filterNews('update')" class="category-tag update rounded-full px-4 py-2 text-white text-sm whitespace-nowrap">
                        <i class="fas fa-sync mr-1"></i>„Ç¢„ÉÉ„Éó„Éá„Éº„Éà
                    </button>
                    <button onclick="filterNews('price')" class="category-tag price rounded-full px-4 py-2 text-white text-sm whitespace-nowrap">
                        <i class="fas fa-chart-line mr-1"></i>‰æ°Ê†º
                    </button>
                    <button onclick="filterNews('partnership')" class="category-tag partnership rounded-full px-4 py-2 text-white text-sm whitespace-nowrap">
                        <i class="fas fa-handshake mr-1"></i>ÊèêÊê∫
                    </button>
                    <button onclick="filterNews('community')" class="category-tag community rounded-full px-4 py-2 text-white text-sm whitespace-nowrap">
                        <i class="fas fa-users mr-1"></i>„Ç≥„Éü„É•„Éã„ÉÜ„Ç£
                    </button>
                </div>
            </div>
            
            <!-- „ÇΩ„Éº„Çπ„Éï„Ç£„É´„Çø„Éº -->
            <div class="glass-effect rounded-2xl p-4 mb-6">
                <h3 class="text-lg font-semibold text-white mb-3">„Éã„É•„Éº„Çπ„ÇΩ„Éº„Çπ</h3>
                <div class="flex gap-2 flex-wrap">
                    <button onclick="filterBySource('all')" class="category-tag rounded-full px-3 py-1 text-xs text-white whitespace-nowrap bg-white/20">
                        „Åô„Åπ„Å¶
                    </button>
                    <button onclick="filterBySource('Twitter')" class="category-tag rounded-full px-3 py-1 text-xs text-white whitespace-nowrap">
                        <i class="fab fa-twitter mr-1"></i>Twitter
                    </button>
                    <button onclick="filterBySource('cryptonews.com')" class="category-tag rounded-full px-3 py-1 text-xs text-white whitespace-nowrap">
                        CryptoNews
                    </button>
                    <button onclick="filterBySource('cointelegraph.com')" class="category-tag rounded-full px-3 py-1 text-xs text-white whitespace-nowrap">
                        Cointelegraph
                    </button>
                </div>
            </div>
            
            <!-- „Éà„É¨„É≥„Éâ„Éã„É•„Éº„Çπ -->
            <div class="mb-6">
                <h3 class="text-2xl font-bold text-white mb-4 flex items-center gap-2">
                    <i class="fas fa-fire text-orange-400"></i>
                    üî• „Éà„É¨„É≥„Éâ„Éã„É•„Éº„Çπ
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4" id="trendingNews">
                    <!-- „Éà„É¨„É≥„Éâ„Éã„É•„Éº„Çπ„ÅåÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Çã -->
                </div>
            </div>
            
            <!-- ÊúÄÊñ∞„Éã„É•„Éº„Çπ„É™„Çπ„Éà -->
            <div class="space-y-4" id="newsList">
                <!-- „Éã„É•„Éº„Çπ„Ç¢„Ç§„ÉÜ„É†„ÅåÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Çã -->
            </div>
        </div>
        
        <!-- „ÉÅ„É£„ÉÉ„Éà„Çø„Éñ -->
        <div id="chatTab" class="tab-content hidden max-w-7xl mx-auto p-4">
            <div class="chat-container">
                <div class="flex gap-4 h-full">
                    <!-- „ÉÅ„É£„ÉÉ„Éà„Çµ„Ç§„Éâ„Éê„Éº -->
                    <div class="chat-sidebar">
                        <div class="p-4">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-lg font-bold text-white">„ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†</h3>
                                <button onclick="showAddChatRoom()" class="glass-effect rounded-full p-2 text-white hover:bg-white/20">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                            <div class="space-y-2" id="chatRooms">
                                <!-- „ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†„ÅåÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Çã -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- „ÉÅ„É£„ÉÉ„Éà„É°„Ç§„É≥ -->
                    <div class="chat-main">
                        <div class="chat-header">
                            <h3 class="text-xl font-bold text-white" id="chatRoomTitle">‰∏ÄËà¨</h3>
                            <p class="text-sm text-white/60" id="chatRoomDescription">ÂÖ®Ëà¨„ÉÅ„É£„ÉÉ„Éà</p>
                        </div>
                        
                        <div class="chat-messages" id="chatMessages">
                            <!-- „ÉÅ„É£„ÉÉ„Éà„É°„ÉÉ„Çª„Éº„Ç∏„ÅåÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Çã -->
                        </div>
                        
                        <div class="chat-input-container">
                            <div class="flex gap-3">
                                <input 
                                    type="text" 
                                    id="chatInput"
                                    placeholder="„É°„ÉÉ„Çª„Éº„Ç∏„ÇíÂÖ•Âäõ..."
                                    class="flex-1 glass-effect rounded-2xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-loopin-primary"
                                    onkeypress="if(event.key === 'Enter') sendChatMessage()"
                                >
                                <button onclick="sendChatMessage()" class="gradient-btn-primary text-white font-semibold px-6 py-3 rounded-xl hover:shadow-lg smooth-transition">
                                    ÈÄÅ‰ø°
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- „Éà„Éî„ÉÉ„ÇØ„É´„Éº„É†Ôºà„É¢„Éº„ÉÄ„É´Ôºâ -->
        <div id="topicRoomModal" class="fixed inset-0 bg-black/50 z-50 hidden">
            <div class="h-full flex flex-col">
                <div class="topic-room-header glass-effect px-4 py-3">
                    <div class="max-w-4xl mx-auto flex items-center justify-between">
                        <button onclick="closeTopicRoom()" class="glass-effect rounded-full p-2 text-white hover:bg-white/20">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h3 class="text-xl font-bold text-white" id="topicRoomTitle">„Éà„Éî„ÉÉ„ÇØ„É´„Éº„É†</h3>
                        <div class="flex items-center gap-2">
                            <span class="text-white/70 text-sm">ÂèÇÂä†ËÄÖ:</span>
                            <span class="text-white font-semibold" id="topicRoomMembers">1,234</span>
                        </div>
                    </div>
                </div>
                
                <div class="flex-1 overflow-y-auto p-4">
                    <div class="max-w-4xl mx-auto space-y-4" id="topicRoomPosts">
                        <!-- „Éà„Éî„ÉÉ„ÇØÊäïÁ®ø„ÅåÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Çã -->
                    </div>
                </div>
                
                <div class="glass-effect p-4">
                    <div class="max-w-4xl mx-auto flex gap-3">
                        <input 
                            type="text" 
                            id="topicRoomInput"
                            placeholder="„Åì„ÅÆ„Éà„Éî„ÉÉ„ÇØ„Å´„Å§„ÅÑ„Å¶ÊäïÁ®ø..."
                            class="flex-1 glass-effect rounded-2xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-400"
                        >
                        <button onclick="postToTopic()" class="bg-gradient-to-r from-blue-500 to-purple-600 text-white font-semibold px-6 py-3 rounded-xl hover:shadow-lg smooth-transition">
                            ÊäïÁ®ø
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- „Éó„É≠„Éï„Ç£„Éº„É´„É¢„Éº„ÉÄ„É´ -->
        <div id="profileModal" class="fixed inset-0 bg-black/50 z-50 hidden">
            <div class="h-full flex flex-col">
                <div class="glass-effect px-4 py-3">
                    <div class="max-w-4xl mx-auto flex items-center justify-between">
                        <button onclick="closeProfile()" class="glass-effect rounded-full p-2 text-white hover:bg-white/20">
                            <i class="fas fa-times"></i>
                        </button>
                        <h3 class="text-xl font-bold text-white">„Éó„É≠„Éï„Ç£„Éº„É´</h3>
                        <button onclick="showProfileEdit()" class="glass-effect rounded-full p-2 text-white hover:bg-white/20">
                            <i class="fas fa-edit"></i>
                        </button>
                    </div>
                </div>
                
                <div class="flex-1 overflow-y-auto p-4">
                    <div class="max-w-4xl mx-auto">
                        <!-- „Éó„É≠„Éï„Ç£„Éº„É´„Éò„ÉÉ„ÉÄ„Éº -->
                        <div class="glass-effect rounded-3xl p-8 mb-6 text-center">
                            <img id="profileAvatar" src="https://picsum.photos/seed/user/120/120.jpg" alt="Profile" class="w-32 h-32 rounded-full mx-auto mb-4 border-4 border-white/30">
                            <h2 id="profileName" class="text-2xl font-bold text-white mb-2">„ÅÇ„Å™„Åü„ÅÆÂêçÂâç</h2>
                            <p id="profileUsername" class="text-white/70 mb-4">@yourusername</p>
                            <p id="profileBio" class="text-white/80 mb-6 max-w-md mx-auto">Ëá™Â∑±Á¥π‰ªãÊñá„Åå„Åì„Åì„Å´Ë°®Á§∫„Åï„Çå„Åæ„Åô</p>
                            
                            <div class="flex justify-center gap-8 mb-6">
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-white" id="profilePostsCount">0</p>
                                    <p class="text-white/60 text-sm">ÊäïÁ®ø</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-white" id="profileFollowingCount">0</p>
                                    <p class="text-white/60 text-sm">„Éï„Ç©„É≠„Éº</p>
                                </div>
                                <div class="text-center">
                                    <p class="text-2xl font-bold text-white" id="profileFollowersCount">0</p>
                                    <p class="text-white/60 text-sm">„Éï„Ç©„É≠„ÉØ„Éº</p>
                                </div>
                            </div>
                            
                            <div class="glass-effect rounded-2xl p-4 inline-block">
                                <p class="text-white/70 text-sm">Á∑èÁç≤ÂæótestPi</p>
                                <p class="text-2xl font-bold text-yellow-400"><span id="profileTotalPi">0.00</span> testPi</p>
                            </div>
                        </div>
                        
                        <!-- „Çø„Éñ„Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥ -->
                        <div class="flex gap-1 mb-6">
                            <button onclick="switchProfileTab('posts')" class="profile-tab active flex-1 text-center py-3 font-medium" data-profile-tab="posts">
                                ÊäïÁ®ø
                            </button>
                            <button onclick="switchProfileTab('following')" class="profile-tab flex-1 text-center py-3 font-medium" data-profile-tab="following">
                                „Éï„Ç©„É≠„Éº
                            </button>
                            <button onclick="switchProfileTab('followers')" class="profile-tab flex-1 text-center py-3 font-medium" data-profile-tab="followers">
                                „Éï„Ç©„É≠„ÉØ„Éº
                            </button>
                        </div>
                        
                        <!-- „Éó„É≠„Éï„Ç£„Éº„É´„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
                        <div id="profileContent" class="space-y-4">
                            <!-- ÂãïÁöÑ„Å´„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅåË°®Á§∫„Åï„Çå„Çã -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- „Éó„É≠„Éï„Ç£„Éº„É´Á∑®ÈõÜ„É¢„Éº„ÉÄ„É´ -->
        <div id="profileEditModal" class="fixed inset-0 bg-black/80 z-50 hidden">
            <div class="h-full flex flex-col">
                <div class="glass-effect px-4 py-3">
                    <div class="max-w-4xl mx-auto flex items-center justify-between">
                        <button onclick="closeProfileEdit()" class="glass-effect rounded-full p-2 text-white hover:bg-white/20">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h3 class="text-xl font-bold text-white">„Éó„É≠„Éï„Ç£„Éº„É´Á∑®ÈõÜ</h3>
                        <button onclick="saveProfileEdit()" class="gradient-btn-primary text-white font-semibold px-4 py-2 rounded-xl hover:shadow-lg smooth-transition">
                            ‰øùÂ≠ò
                        </button>
                    </div>
                </div>
                
                <div class="flex-1 overflow-y-auto p-4">
                    <div class="max-w-4xl mx-auto profile-edit-container">
                        <div class="glass-effect rounded-3xl p-8">
                            <!-- „Ç¢„Éê„Çø„Éº„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ -->
                            <div class="profile-avatar-upload">
                                <img id="editProfileAvatar" src="https://picsum.photos/seed/user/120/120.jpg" alt="Profile">
                                <div class="upload-btn" onclick="document.getElementById('avatarUpload').click()">
                                    <i class="fas fa-camera text-white"></i>
                                </div>
                                <input type="file" id="avatarUpload" accept="image/*" style="display: none;" onchange="previewAvatar(this)">
                            </div>
                            
                            <!-- „Éï„Ç©„Éº„É† -->
                            <div class="space-y-6">
                                <div class="profile-form-group">
                                    <label for="editName">ÂêçÂâç</label>
                                    <input type="text" id="editName" class="glass-effect rounded-xl">
                                </div>
                                
                                <div class="profile-form-group">
                                    <label for="editUsername">„É¶„Éº„Ç∂„ÉºÂêç</label>
                                    <input type="text" id="editUsername" class="glass-effect rounded-xl">
                                </div>
                                
                                <div class="profile-form-group">
                                    <label for="editBio">Ëá™Â∑±Á¥π‰ªã</label>
                                    <textarea id="editBio" class="glass-effect rounded-xl"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- „É¶„Éº„Ç∂„Éº„É™„Çπ„Éà„É¢„Éº„ÉÄ„É´ -->
        <div id="userListModal" class="fixed inset-0 bg-black/80 z-50 hidden">
            <div class="h-full flex flex-col">
                <div class="glass-effect px-4 py-3">
                    <div class="max-w-4xl mx-auto flex items-center justify-between">
                        <button onclick="closeUserList()" class="glass-effect rounded-full p-2 text-white hover:bg-white/20">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h3 class="text-xl font-bold text-white" id="userListTitle">„É¶„Éº„Ç∂„Éº„É™„Çπ„Éà</h3>
                        <div class="w-8"></div>
                    </div>
                </div>
                
                <div class="flex-1 overflow-y-auto p-4">
                    <div class="max-w-4xl mx-auto">
                        <div class="space-y-3" id="userList">
                            <!-- „É¶„Éº„Ç∂„Éº„Ç´„Éº„Éâ„ÅåÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Çã -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- „Éã„É•„Éº„ÇπË©≥Á¥∞„É¢„Éº„ÉÄ„É´ -->
        <div id="newsDetailModal" class="fixed inset-0 bg-black/80 z-50 hidden">
            <div class="h-full flex flex-col">
                <div class="glass-effect px-4 py-3">
                    <div class="max-w-5xl mx-auto flex items-center justify-between">
                        <button onclick="closeNewsDetail()" class="glass-effect rounded-full p-2 text-white hover:bg-white/20">
                            <i class="fas fa-arrow-left"></i>
                        </button>
                        <h3 class="text-xl font-bold text-white">LooPin News Ë©≥Á¥∞</h3>
                        <div class="w-8"></div>
                    </div>
                </div>
                
                <div class="flex-1 overflow-y-auto p-4">
                    <div class="max-w-5xl mx-auto">
                        <!-- „Éã„É•„Éº„Çπ„Ç≥„É≥„ÉÜ„É≥„ÉÑ -->
                        <div class="glass-effect rounded-3xl p-6 mb-6" id="newsContent">
                            <!-- ÂãïÁöÑ„Å´„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅåË°®Á§∫„Åï„Çå„Çã -->
                        </div>
                        
                        <!-- ‰ø°ÊÜëÊÄßÊäïÁ•® -->
                        <div class="glass-effect rounded-2xl p-4 mb-6">
                            <h4 class="text-lg font-semibold text-white mb-3 flex items-center gap-2">
                                <i class="fas fa-balance-scale text-loopin-accent"></i>
                                „Åì„ÅÆ„Éã„É•„Éº„Çπ„ÅÆ‰ø°ÊÜëÊÄß
                            </h4>
                            <div class="flex items-center gap-4 mb-3">
                                <button onclick="voteCredibility('trust')" class="flex-1 glass-effect rounded-xl p-3 text-center hover:bg-green-500/20 smooth-transition">
                                    <i class="fas fa-thumbs-up text-green-400 mr-2"></i>
                                    <span class="text-white">‰ø°È†º„Åß„Åç„Çã</span>
                                    <span class="text-green-400 font-semibold ml-2" id="trustCount">0</span>
                                </button>
                                <button onclick="voteCredibility('doubt')" class="flex-1 glass-effect rounded-xl p-3 text-center hover:bg-red-500/20 smooth-transition">
                                    <i class="fas fa-thumbs-down text-red-400 mr-2"></i>
                                    <span class="text-white">Áñë„Çè„Åó„ÅÑ</span>
                                    <span class="text-red-400 font-semibold ml-2" id="doubtCount">0</span>
                                </button>
                            </div>
                            <div class="credibility-meter">
                                <div class="credibility-fill credibility-medium" id="credibilityBar" style="width: 50%"></div>
                            </div>
                            <p class="text-center text-white/70 text-sm mt-2">
                                ‰ø°ÊÜëÊÄß„Çπ„Ç≥„Ç¢: <span class="font-semibold" id="credibilityScore">50</span>%
                            </p>
                        </div>
                        
                        <!-- „Ç≥„É°„É≥„Éà„Çª„ÇØ„Ç∑„Éß„É≥ -->
                        <div class="glass-effect rounded-2xl p-4">
                            <h4 class="text-lg font-semibold text-white mb-4 flex items-center gap-2">
                                <i class="fas fa-comments text-loopin-secondary"></i>
                                „Ç≥„É°„É≥„Éà
                            </h4>
                            
                            <!-- „Ç≥„É°„É≥„ÉàÂÖ•Âäõ -->
                            <div class="mb-4">
                                <div class="flex gap-3">
                                    <img src="https://picsum.photos/seed/user/40/40.jpg" alt="User" class="w-10 h-10 rounded-full">
                                    <div class="flex-1">
                                        <textarea 
                                            id="commentInput"
                                            placeholder="„Ç≥„É°„É≥„Éà„ÇíÊäïÁ®ø„Åó„Å¶testPi„ÇíÁç≤Âæó..."
                                            class="comment-input w-full glass-effect rounded-2xl p-3 text-white placeholder-white/50 resize-none focus:outline-none focus:ring-2 focus:ring-loopin-primary"
                                            rows="3"
                                        ></textarea>
                                        <div class="flex items-center justify-between mt-2">
                                            <span class="text-yellow-400 text-sm">
                                                <i class="fas fa-coins mr-1"></i>Ë≥™„ÅÆÈ´ò„ÅÑ„Ç≥„É°„É≥„Éà„ÅßÊúÄÂ§ß 2 testPi Áç≤Âæó
                                            </span>
                                            <button onclick="postComment()" class="gradient-btn-primary text-white font-semibold px-4 py-2 rounded-xl hover:shadow-lg smooth-transition">
                                                ÊäïÁ®ø
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- „Ç≥„É°„É≥„Éà„É™„Çπ„Éà -->
                            <div class="space-y-3" id="commentsList">
                                <!-- „Ç≥„É°„É≥„Éà„ÅåÂãïÁöÑ„Å´ËøΩÂä†„Åï„Çå„Çã -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- „Ç∑„Éß„Éº„ÉàÂãïÁîª„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„É¢„Éº„ÉÄ„É´ -->
        <div id="reelUploadModal" class="fixed inset-0 bg-black/80 z-50 hidden">
            <div class="h-full flex flex-col">
                <div class="glass-effect px-4 py-3">
                    <div class="max-w-4xl mx-auto flex items-center justify-between">
                        <button onclick="closeReelUpload()" class="glass-effect rounded-full p-2 text-white hover:bg-white/20">
                            <i class="fas fa-times"></i>
                        </button>
                        <h3 class="text-xl font-bold text-white">„Ç∑„Éß„Éº„ÉàÂãïÁîª„ÇíÊäïÁ®ø</h3>
                        <div class="w-8"></div>
                    </div>
                </div>
                
                <div class="flex-1 overflow-y-auto p-4">
                    <div class="max-w-4xl mx-auto">
                        <div class="glass-effect rounded-3xl p-8">
                            <div class="text-center mb-8">
                                <div class="w-24 h-24 gradient-btn-secondary rounded-full flex items-center justify-center mx-auto mb-4">
                                    <i class="fas fa-video text-white text-3xl"></i>
                                </div>
                                <h2 class="text-2xl font-bold text-white mb-2">„Ç∑„Éß„Éº„ÉàÂãïÁîª„ÇíÊäïÁ®ø</h2>
                                <p class="text-white/70">Pi„Ç≥„Éü„É•„Éã„ÉÜ„Ç£„Å´„Ç∑„Éß„Éº„ÉàÂãïÁîª„ÇíÂÖ±Êúâ„Åó„Çà„ÅÜÔºÅ</p>
                            </div>
                            
                            <div class="space-y-6">
                                <div>
                                    <label class="block text-white font-medium mb-2">ÂãïÁîª„Éï„Ç°„Ç§„É´</label>
                                    <div class="glass-effect rounded-2xl p-8 text-center border-2 border-dashed border-white/30" id="videoDropZone">
                                        <i class="fas fa-cloud-upload-alt text-4xl text-white/50 mb-4"></i>
                                        <p class="text-white/70 mb-4">ÂãïÁîª„Çí„Éâ„É©„ÉÉ„Ç∞ÔºÜ„Éâ„É≠„ÉÉ„Éó„Åô„Çã„Åã„ÄÅ„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶ÈÅ∏Êäû</p>
                                        <button class="gradient-btn-secondary text-white font-semibold px-6 py-3 rounded-xl hover:shadow-lg smooth-transition" onclick="document.getElementById('videoUpload').click()">
                                            „Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû
                                        </button>
                                        <input type="file" id="videoUpload" accept="video/*" style="display: none;" onchange="handleVideoUpload(this)">
                                    </div>
                                    <div id="videoPreview" class="mt-4 hidden">
                                        <video id="previewVideo" class="w-full rounded-2xl" controls></video>
                                    </div>
                                </div>
                                
                                <div>
                                    <label class="block text-white font-medium mb-2">„Ç≠„É£„Éó„Ç∑„Éß„É≥</label>
                                    <textarea 
                                        id="reelCaption"
                                        placeholder="ÂãïÁîª„ÅÆË™¨Êòé„ÇíÂÖ•Âäõ..."
                                        class="w-full glass-effect rounded-2xl p-4 text-white placeholder-white/50 resize-none focus:outline-none focus:ring-2 focus:ring-loopin-primary"
                                        rows="3"
                                    ></textarea>
                                </div>
                                
                                <div>
                                    <label class="block text-white font-medium mb-2">„Éè„ÉÉ„Ç∑„É•„Çø„Ç∞</label>
                                    <input 
                                        type="text" 
                                        id="reelHashtags"
                                        placeholder="#Pi #„Éû„Ç§„Éã„É≥„Ç∞ #„Ç®„Ç≥„Ç∑„Çπ„ÉÜ„É†"
                                        class="w-full glass-effect rounded-2xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-loopin-primary"
                                    >
                                </div>
                                
                                <div class="glass-effect rounded-2xl p-4">
                                    <h4 class="text-white font-medium mb-2">Â†±ÈÖ¨‰∫àÊ∏¨</h4>
                                    <div class="flex items-center justify-between">
                                        <span class="text-white/70">‰∫àÊ∏¨Áç≤ÂæótestPi</span>
                                        <span class="text-yellow-400 font-bold">5.0 - 15.0 testPi</span>
                                    </div>
                                    <div class="text-xs text-white/60 mt-1">
                                        Ë¶ñËÅ¥ÂõûÊï∞„ÇÑ„Ç®„É≥„Ç≤„Éº„Ç∏„É°„É≥„Éà„Å´Âøú„Åò„Å¶Â§âÂãï
                                    </div>
                                </div>
                                
                                <button onclick="uploadReel()" class="w-full gradient-btn-primary text-white font-semibold py-4 rounded-2xl hover:shadow-lg smooth-transition">
                                    ÊäïÁ®ø„Åô„Çã
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- „ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†ËøΩÂä†/Á∑®ÈõÜ„É¢„Éº„ÉÄ„É´ -->
        <div id="chatRoomModal" class="fixed inset-0 bg-black/80 z-50 hidden">
            <div class="h-full flex items-center justify-center p-4">
                <div class="glass-effect rounded-3xl p-8 max-w-md w-full">
                    <h3 class="text-2xl font-bold text-white mb-6 text-center" id="chatRoomModalTitle">„ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†„ÇíËøΩÂä†</h3>
                    
                    <div class="space-y-6">
                        <div>
                            <label class="block text-white font-medium mb-2">„É´„Éº„É†Âêç</label>
                            <input 
                                type="text" 
                                id="chatRoomName"
                                placeholder="„É´„Éº„É†Âêç„ÇíÂÖ•Âäõ..."
                                class="w-full glass-effect rounded-2xl px-4 py-3 text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-loopin-primary"
                            >
                        </div>
                        
                        <div>
                            <label class="block text-white font-medium mb-2">Ë™¨Êòé</label>
                            <textarea 
                                id="chatRoomDescription"
                                placeholder="„É´„Éº„É†„ÅÆË™¨Êòé„ÇíÂÖ•Âäõ..."
                                class="w-full glass-effect rounded-2xl p-4 text-white placeholder-white/50 resize-none focus:outline-none focus:ring-2 focus:ring-loopin-primary"
                                rows="3"
                            ></textarea>
                        </div>
                        
                        <div>
                            <label class="block text-white font-medium mb-2">„Ç¢„Ç§„Ç≥„É≥</label>
                            <div class="grid grid-cols-5 gap-3">
                                <button onclick="selectChatRoomIcon('fas fa-hashtag')" class="chat-room-icon-btn glass-effect rounded-xl p-3 text-white hover:bg-white/20">
                                    <i class="fas fa-hashtag"></i>
                                </button>
                                <button onclick="selectChatRoomIcon('fas fa-chart-line')" class="chat-room-icon-btn glass-effect rounded-xl p-3 text-white hover:bg-white/20">
                                    <i class="fas fa-chart-line"></i>
                                </button>
                                <button onclick="selectChatRoomIcon('fas fa-coins')" class="chat-room-icon-btn glass-effect rounded-xl p-3 text-white hover:bg-white/20">
                                    <i class="fas fa-coins"></i>
                                </button>
                                <button onclick="selectChatRoomIcon('fas fa-infinity')" class="chat-room-icon-btn glass-effect rounded-xl p-3 text-white hover:bg-white/20">
                                    <i class="fas fa-infinity"></i>
                                </button>
                                <button onclick="selectChatRoomIcon('fas fa-lightbulb')" class="chat-room-icon-btn glass-effect rounded-xl p-3 text-white hover:bg-white/20">
                                    <i class="fas fa-lightbulb"></i>
                                </button>
                            </div>
                        </div>
                        
                        <div class="flex gap-3">
                            <button onclick="closeChatRoomModal()" class="flex-1 glass-effect rounded-2xl px-4 py-3 text-white hover:bg-white/20">
                                „Ç≠„É£„É≥„Çª„É´
                            </button>
                            <button onclick="saveChatRoom()" class="flex-1 gradient-btn-primary text-white font-semibold px-4 py-3 rounded-2xl hover:shadow-lg smooth-transition">
                                ‰øùÂ≠ò
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- testPiÁç≤Âæó„Éù„ÉÉ„Éó„Ç¢„ÉÉ„Éó -->
        <div id="piPopup" class="fixed bottom-8 right-8 hidden">
            <div class="glass-effect rounded-2xl p-4 flex items-center gap-3 loopin-pi-coin">
                <div class="w-12 h-12 gradient-btn-accent rounded-full flex items-center justify-center">
                    <i class="fas fa-coins text-white text-xl"></i>
                </div>
                <div>
                    <p class="text-white font-bold text-lg">+<span id="piAmount">0.00</span> testPi</p>
                    <p class="text-white/70 text-sm">LooPin„ÅßÁç≤ÂæóÔºÅ</p>
                </div>
            </div>
        </div>
    </div>
    
<!-- „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥„Ç≥„Ç¢ -->
<script>
    // FirebaseË®≠ÂÆöÔºàloopin-7e965Ôºâ
    const firebaseConfig = {
        apiKey: "AIzaSyAe1iHIechue5XHtZl0FitoWqn3n_XSzT4",
        authDomain: "loopin-7e965.firebaseapp.com",
        projectId: "loopin-7e965",
        storageBucket: "loopin-7e965.firebasestorage.app",
        messagingSenderId: "165346335944",
        appId: "1:165346335944:web:081a4a13e2d9a7df9919fd",
        measurementId: "G-835HLBSPYB"
    };

    // FirebaseÂàùÊúüÂåñ
    firebase.initializeApp(firebaseConfig);
    
    // Firebase„Çµ„Éº„Éì„Çπ„ÅÆÂèñÂæó
    const auth = firebase.auth();
    const db = firebase.firestore();
    const storage = firebase.storage();
        
        // „Ç≥„É¨„ÇØ„Ç∑„Éß„É≥ÂèÇÁÖß
        const usersCollection = db.collection('users');
        const postsCollection = db.collection('posts');
        const chatRoomsCollection = db.collection('chatRooms');
        const chatMessagesCollection = db.collection('chatMessages');
        const reelsCollection = db.collection('reels');
        const newsCollection = db.collection('news');
        const followsCollection = db.collection('follows');
        
        // „Ç¢„Éó„É™„Ç±„Éº„Ç∑„Éß„É≥Ë®≠ÂÆö
        const APP_CONFIG = {
            TEST_MODE: true,
            PI_CURRENCY: 'testPi',
            ADMIN_USERS: ['admin1', 'admin2'], // ÁÆ°ÁêÜËÄÖ„É¶„Éº„Ç∂„ÉºID
        };
        
        // Ë®ÄË™û„Éá„Éº„Çø
        const languages = [
            { code: 'ja', name: 'Êó•Êú¨Ë™û', flag: 'üáØüáµ' },
            { code: 'en', name: 'English', flag: 'üá∫üá∏' },
            { code: 'zh', name: '‰∏≠Êñá', flag: 'üá®üá≥' },
            { code: 'ko', name: 'ÌïúÍµ≠Ïñ¥', flag: 'üá∞üá∑' },
            { code: 'es', name: 'Espa√±ol', flag: 'üá™üá∏' },
            { code: 'fr', name: 'Fran√ßais', flag: 'üá´üá∑' },
            // ‰ªñ24Ë®ÄË™û...
        ];
        
        // „É¶„Éº„Ç∂„Éº„Éá„Éº„ÇøÁÆ°ÁêÜ
        class UserDataManager {
            static getCurrentUser() {
                return auth.currentUser;
            }
            
            static async getUserData(userId) {
                try {
                    const doc = await usersCollection.doc(userId).get();
                    return doc.exists ? doc.data() : null;
                } catch (error) {
                    console.error('Error getting user data:', error);
                    return null;
                }
            }
            
            static async saveUserData(userId, userData) {
                try {
                    await usersCollection.doc(userId).set(userData, { merge: true });
                    return true;
                } catch (error) {
                    console.error('Error saving user data:', error);
                    return false;
                }
            }
            
            static async updateUserData(userId, updates) {
                try {
                    await usersCollection.doc(userId).update(updates);
                    return true;
                } catch (error) {
                    console.error('Error updating user data:', error);
                    return false;
                }
            }
            
            static async createUser(userId, userData) {
                try {
                    await usersCollection.doc(userId).set(userData);
                    return true;
                } catch (error) {
                    console.error('Error creating user:', error);
                    return false;
                }
            }
            
            static isAdmin() {
                const currentUser = this.getCurrentUser();
                return currentUser && APP_CONFIG.ADMIN_USERS.includes(currentUser.uid);
            }
            
            static async getFollowing(userId) {
                try {
                    const snapshot = await followsCollection
                        .where('followerId', '==', userId)
                        .get();
                    
                    return snapshot.docs.map(doc => doc.data().followingId);
                } catch (error) {
                    console.error('Error getting following:', error);
                    return [];
                }
            }
            
            static async addFollowing(followerId, followingId) {
                try {
                    // Êó¢„Å´„Éï„Ç©„É≠„Éº„Åó„Å¶„ÅÑ„Çã„Åã„ÉÅ„Çß„ÉÉ„ÇØ
                    const existing = await followsCollection
                        .where('followerId', '==', followerId)
                        .where('followingId', '==', followingId)
                        .get();
                    
                    if (!existing.empty) {
                        return false; // Êó¢„Å´„Éï„Ç©„É≠„Éº„Åó„Å¶„ÅÑ„Çã
                    }
                    
                    // „Éï„Ç©„É≠„ÉºÈñ¢‰øÇ„ÇíËøΩÂä†
                    await followsCollection.add({
                        followerId,
                        followingId,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    
                    return true;
                } catch (error) {
                    console.error('Error adding following:', error);
                    return false;
                }
            }
            
            static async removeFollowing(followerId, followingId) {
                try {
                    const snapshot = await followsCollection
                        .where('followerId', '==', followerId)
                        .where('followingId', '==', followingId)
                        .get();
                    
                    if (snapshot.empty) {
                        return false; // „Éï„Ç©„É≠„Éº„Åó„Å¶„ÅÑ„Å™„ÅÑ
                    }
                    
                    // „Éï„Ç©„É≠„ÉºÈñ¢‰øÇ„ÇíÂâäÈô§
                    const batch = db.batch();
                    snapshot.docs.forEach(doc => {
                        batch.delete(doc.ref);
                    });
                    await batch.commit();
                    
                    return true;
                } catch (error) {
                    console.error('Error removing following:', error);
                    return false;
                }
            }
            
            static async getFollowers(userId) {
                try {
                    const snapshot = await followsCollection
                        .where('followingId', '==', userId)
                        .get();
                    
                    return snapshot.docs.map(doc => doc.data().followerId);
                } catch (error) {
                    console.error('Error getting followers:', error);
                    return [];
                }
            }
            
            static async isFollowing(followerId, followingId) {
                try {
                    const snapshot = await followsCollection
                        .where('followerId', '==', followerId)
                        .where('followingId', '==', followingId)
                        .get();
                    
                    return !snapshot.empty;
                } catch (error) {
                    console.error('Error checking follow status:', error);
                    return false;
                }
            }
        }
        
        // „ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†ÁÆ°ÁêÜ
        class ChatRoomManager {
            static async getChatRooms() {
                try {
                    const snapshot = await chatRoomsCollection.get();
                    return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                } catch (error) {
                    console.error('Error getting chat rooms:', error);
                    return [];
                }
            }
            
            static async addChatRoom(room) {
                try {
                    const docRef = await chatRoomsCollection.add({
                        ...room,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    return { id: docRef.id, ...room };
                } catch (error) {
                    console.error('Error adding chat room:', error);
                    return null;
                }
            }
            
            static async updateChatRoom(roomId, updates) {
                try {
                    await chatRoomsCollection.doc(roomId).update(updates);
                    return true;
                } catch (error) {
                    console.error('Error updating chat room:', error);
                    return false;
                }
            }
            
            static async deleteChatRoom(roomId) {
                try {
                    await chatRoomsCollection.doc(roomId).delete();
                    // Èñ¢ÈÄ£„Åô„Çã„É°„ÉÉ„Çª„Éº„Ç∏„ÇÇÂâäÈô§
                    const messagesSnapshot = await chatMessagesCollection
                        .where('roomId', '==', roomId)
                        .get();
                    
                    const batch = db.batch();
                    messagesSnapshot.docs.forEach(doc => {
                        batch.delete(doc.ref);
                    });
                    await batch.commit();
                    
                    return true;
                } catch (error) {
                    console.error('Error deleting chat room:', error);
                    return false;
                }
            }
            
            static async getChatMessages(roomId) {
                try {
                    const snapshot = await chatMessagesCollection
                        .where('roomId', '==', roomId)
                        .orderBy('createdAt', 'asc')
                        .get();
                    
                    return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                } catch (error) {
                    console.error('Error getting chat messages:', error);
                    return [];
                }
            }
            
            static async addChatMessage(message) {
                try {
                    const docRef = await chatMessagesCollection.add({
                        ...message,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    return { id: docRef.id, ...message };
                } catch (error) {
                    console.error('Error adding chat message:', error);
                    return null;
                }
            }
        }
        
        // ÊäïÁ®øÁÆ°ÁêÜ
        class PostManager {
            static async getPosts(limit = 20) {
                try {
                    const snapshot = await postsCollection
                        .orderBy('createdAt', 'desc')
                        .limit(limit)
                        .get();
                    
                    return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                } catch (error) {
                    console.error('Error getting posts:', error);
                    return [];
                }
            }
            
            static async addPost(post) {
                try {
                    const docRef = await postsCollection.add({
                        ...post,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    return { id: docRef.id, ...post };
                } catch (error) {
                    console.error('Error adding post:', error);
                    return null;
                }
            }
            
            static async updatePost(postId, updates) {
                try {
                    await postsCollection.doc(postId).update(updates);
                    return true;
                } catch (error) {
                    console.error('Error updating post:', error);
                    return false;
                }
            }
            
            static async deletePost(postId) {
                try {
                    await postsCollection.doc(postId).delete();
                    return true;
                } catch (error) {
                    console.error('Error deleting post:', error);
                    return false;
                }
            }
        }
        
        // „Ç∑„Éß„Éº„ÉàÂãïÁîªÁÆ°ÁêÜ
        class ReelManager {
            static async getReels(limit = 20) {
                try {
                    const snapshot = await reelsCollection
                        .orderBy('createdAt', 'desc')
                        .limit(limit)
                        .get();
                    
                    return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                } catch (error) {
                    console.error('Error getting reels:', error);
                    return [];
                }
            }
            
            static async addReel(reel) {
                try {
                    const docRef = await reelsCollection.add({
                        ...reel,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                    return { id: docRef.id, ...reel };
                } catch (error) {
                    console.error('Error adding reel:', error);
                    return null;
                }
            }
            
            static async updateReel(reelId, updates) {
                try {
                    await reelsCollection.doc(reelId).update(updates);
                    return true;
                } catch (error) {
                    console.error('Error updating reel:', error);
                    return false;
                }
            }
            
            static async deleteReel(reelId) {
                try {
                    const reel = await reelsCollection.doc(reelId).get();
                    if (reel.exists) {
                        const reelData = reel.data();
                        // Storage„Åã„ÇâÂãïÁîª„Éï„Ç°„Ç§„É´„ÇíÂâäÈô§
                        if (reelData.videoUrl) {
                            const videoRef = storage.refFromURL(reelData.videoUrl);
                            await videoRef.delete();
                        }
                    }
                    await reelsCollection.doc(reelId).delete();
                    return true;
                } catch (error) {
                    console.error('Error deleting reel:', error);
                    return false;
                }
            }
            
            static async uploadVideo(file) {
                try {
                    const fileName = `${Date.now()}_${file.name}`;
                    const storageRef = storage.ref(`reels/${fileName}`);
                    const snapshot = await storageRef.put(file);
                    const downloadUrl = await snapshot.ref.getDownloadURL();
                    return downloadUrl;
                } catch (error) {
                    console.error('Error uploading video:', error);
                    return null;
                }
            }
        }
        
        // „Éã„É•„Éº„ÇπÁÆ°ÁêÜ
        class NewsManager {
            static async getNews(limit = 20) {
                try {
                    const snapshot = await newsCollection
                        .orderBy('createdAt', 'desc')
                        .limit(limit)
                        .get();
                    
                    return snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
                } catch (error) {
                    console.error('Error getting news:', error);
                    return [];
                }
            }
            
            static async saveNews(news) {
                try {
                    // Êó¢Â≠ò„ÅÆ„Éã„É•„Éº„Çπ„ÇíÂâäÈô§
                    const snapshot = await newsCollection.get();
                    const batch = db.batch();
                    snapshot.docs.forEach(doc => {
                        batch.delete(doc.ref);
                    });
                    await batch.commit();
                    
                    // Êñ∞„Åó„ÅÑ„Éã„É•„Éº„Çπ„ÇíËøΩÂä†
                    for (const newsItem of news) {
                        await newsCollection.add({
                            ...newsItem,
                            createdAt: firebase.firestore.FieldValue.serverTimestamp()
                        });
                    }
                    
                    return true;
                } catch (error) {
                    console.error('Error saving news:', error);
                    return false;
                }
            }
        }
        
        // PiË™çË®º
        async function authenticatePi() {
            if (!window.Pi) {
                showNotification('Pi SDK„ÅåË™≠„ÅøËæº„Åæ„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì');
                return;
            }
            
            try {
                document.getElementById('authContent').classList.add('hidden');
                document.getElementById('authLoading').classList.remove('hidden');
                
                // Pi SDK„ÅßË™çË®º
                const authResult = await window.Pi.authenticate(['username', 'payments'], {
                    onIncompletePaymentFound: (payment) => {
                        console.log('Incomplete payment found:', payment);
                    }
                });
                
                // FirebaseË™çË®º
                const firebaseAuth = await auth.signInWithCustomToken(authResult.user.uid);
                
                // „É¶„Éº„Ç∂„Éº„Éá„Éº„Çø„ÇíÂèñÂæó„Åæ„Åü„ÅØ‰ΩúÊàê
                let userData = await UserDataManager.getUserData(firebaseAuth.user.uid);
                if (!userData) {
                    userData = {
                        uid: firebaseAuth.user.uid,
                        username: authResult.user.username,
                        name: authResult.user.username,
                        bio: '',
                        avatar: `https://picsum.photos/seed/${firebaseAuth.user.uid}/120/120.jpg`,
                        piBalance: 0,
                        postsCount: 0,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    };
                    
                    await UserDataManager.createUser(firebaseAuth.user.uid, userData);
                }
                
                // „É°„Ç§„É≥ÁîªÈù¢„ÇíË°®Á§∫
                document.getElementById('authOverlay').classList.add('hidden');
                document.getElementById('mainContainer').classList.remove('hidden');
                
                // „É¶„Éº„Ç∂„ÉºÊÉÖÂ†±„ÇíUI„Å´ÂèçÊò†
                updateUserInfo(userData);
                
                // ÂàùÊúü„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„ÇÄ
                loadInitialData();
                
            } catch (error) {
                console.error('Pi authentication failed:', error);
                document.getElementById('authContent').classList.remove('hidden');
                document.getElementById('authLoading').classList.add('hidden');
                showNotification('Ë™çË®º„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
            }
        }
        
        // FirebaseË™çË®ºÁä∂ÊÖã„ÅÆÁõ£Ë¶ñ
        auth.onAuthStateChanged(async (user) => {
            if (user) {
                // „É¶„Éº„Ç∂„Éº„Åå„É≠„Ç∞„Ç§„É≥„Åó„Å¶„ÅÑ„Çã
                const userData = await UserDataManager.getUserData(user.uid);
                if (userData) {
                    updateUserInfo(userData);
                    loadInitialData();
                }
            } else {
                // „É¶„Éº„Ç∂„Éº„Åå„É≠„Ç∞„Ç¢„Ç¶„Éà„Åó„Å¶„ÅÑ„Çã
                document.getElementById('mainContainer').classList.add('hidden');
                document.getElementById('authOverlay').classList.remove('hidden');
            }
        });
        
  // „É¶„Éº„Ç∂„ÉºÊÉÖÂ†±Êõ¥Êñ∞
    function updateUserInfo(userData) {
        document.getElementById('userAvatar').src = userData.avatar;
        updatePiBalance(userData.piBalance || 0);
    }

    // testPiÊÆãÈ´òÊõ¥Êñ∞ÔºöFirestore„Å´‰øùÂ≠ò„Åï„Çå„Å¶„ÅÑ„ÇãÊÆãÈ´ò„Çí„Éô„Éº„Çπ„Å´Âä†ÁÆó„Åô„Çã„Çà„ÅÜ‰øÆÊ≠£
    async function updatePiBalance(amount) {
        const user = UserDataManager.getCurrentUser();
        if (user) {
            // Firestore „Åã„Çâ„É¶„Éº„Ç∂„Éº„Éá„Éº„Çø„ÇíÂèñÂæó
            const userData = await UserDataManager.getUserData(user.uid);
            const currentBalance = userData?.piBalance || 0;
            const newBalance = currentBalance + amount;

            await UserDataManager.updateUserData(user.uid, { piBalance: newBalance });
            
            const balanceElement = document.getElementById('piBalance');
            balanceElement.textContent = newBalance.toFixed(2);
            
            // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÂäπÊûú
            balanceElement.style.transform = 'scale(1.2)';
            balanceElement.style.color = '#FFE66D';
            
            setTimeout(() => {
                balanceElement.style.transform = 'scale(1)';
                balanceElement.style.color = '';
            }, 500);
        }
    }
        
        // testPiÁç≤Âæó„Éù„ÉÉ„Éó„Ç¢„ÉÉ„ÉóË°®Á§∫
        function showRewardPopup(amount) {
            const popup = document.getElementById('piPopup');
            document.getElementById('piAmount').textContent = amount.toFixed(2);
            
            popup.classList.remove('hidden');
            
            // „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥ÂäπÊûú
            popup.style.transform = 'translateY(20px)';
            popup.style.opacity = '0';
            
            setTimeout(() => {
                popup.style.transition = 'transform 0.5s, opacity 0.5s';
                popup.style.transform = 'translateY(0)';
                popup.style.opacity = '1';
            }, 10);
            
            // 5ÁßíÂæå„Å´ÈùûË°®Á§∫
            setTimeout(() => {
                popup.style.transition = 'transform 0.5s, opacity 0.5s';
                popup.style.transform = 'translateY(20px)';
                popup.style.opacity = '0';
                
                setTimeout(() => {
                    popup.classList.add('hidden');
                }, 500);
            }, 5000);
        }
        
        // Ë®ÄË™ûÈÅ∏Êäû
        function selectLanguage(langCode) {
            localStorage.setItem('selectedLanguage', langCode);
            document.getElementById('langOverlay').classList.add('hidden');
            document.getElementById('authOverlay').classList.remove('hidden');
            
            // ÈÅ∏Êäû„Åó„ÅüË®ÄË™û„ÅßUI„ÇíÊõ¥Êñ∞
            updateUILanguage(langCode);
        }
        
        // „Çø„ÉñÂàá„ÇäÊõø„Åà
        function switchTab(tabName) {
            // „Åô„Åπ„Å¶„ÅÆ„Çø„Éñ„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíÈùûË°®Á§∫
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });
            
            // „Åô„Åπ„Å¶„ÅÆ„Çø„Éñ„Éú„Çø„É≥„Åã„Çâ„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„ÇØ„É©„Çπ„ÇíÂâäÈô§
            document.querySelectorAll('.loopin-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ÈÅ∏Êäû„Åó„Åü„Çø„Éñ„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíË°®Á§∫
            document.getElementById(`${tabName}Tab`).classList.remove('hidden');
            
            // ÈÅ∏Êäû„Åó„Åü„Çø„Éñ„Éú„Çø„É≥„Å´„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„ÇØ„É©„Çπ„ÇíËøΩÂä†
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            
            // „Çø„Éñ„Å´Âøú„Åò„Åü„Éá„Éº„Çø„ÇíË™≠„ÅøËæº„ÇÄ
            switch (tabName) {
                case 'feed':
                    loadFeed();
                    break;
                case 'reels':
                    loadReels();
                    break;
                case 'topics':
                    loadTopics();
                    break;
                case 'news':
                    loadNews();
                    break;
                case 'chat':
                    loadChat();
                    break;
            }
        }
        
        // ÊäïÁ®ø‰ΩúÊàê
        async function createPost() {
            const input = document.getElementById('postInput');
            const content = input.value.trim();
            
            if (!content) {
                showNotification('ÊäïÁ®øÂÜÖÂÆπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            const user = UserDataManager.getCurrentUser();
            if (!user) {
                showNotification('Ë™çË®º„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }
            
            const userData = await UserDataManager.getUserData(user.uid);
            if (!userData) {
                showNotification('„É¶„Éº„Ç∂„Éº„Éá„Éº„Çø„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                return;
            }
            
            // ÊäïÁ®ø„Çí‰ΩúÊàê
            const post = {
                userId: user.uid,
                userName: userData.name,
                userAvatar: userData.avatar,
                content: content,
                likes: 0,
                comments: 0,
                shares: 0,
                piEarned: 0
            };
            
            // ÊäïÁ®ø„Çí‰øùÂ≠ò
            const savedPost = await PostManager.addPost(post);
            if (savedPost) {
                // UI„Å´ÊäïÁ®ø„ÇíËøΩÂä†
                addPostToUI(savedPost);
                
                // ÂÖ•Âäõ„Çí„ÇØ„É™„Ç¢
                input.value = '';
                
                // testPi„Çí‰ªò‰∏é
                const rewardAmount = 0.5;
                await updatePiBalance(rewardAmount);
                showRewardPopup(rewardAmount);
                
                // „É¶„Éº„Ç∂„Éº„Éá„Éº„Çø„ÇíÊõ¥Êñ∞
                await UserDataManager.updateUserData(user.uid, {
                    postsCount: (userData.postsCount || 0) + 1
                });
                
                // „Éü„ÉÉ„Ç∑„Éß„É≥ÈÄ≤Êçó„ÇíÊõ¥Êñ∞
                updateMissionProgress('posts');
                
                showNotification('ÊäïÁ®ø„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü');
            } else {
                showNotification('ÊäïÁ®ø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
            }
        }
        
        // ÊäïÁ®ø„ÇíUI„Å´ËøΩÂä†
        function addPostToUI(post) {
            const feed = document.getElementById('feed');
            const postCard = document.createElement('div');
            postCard.className = 'post-card glass-effect rounded-3xl p-6';
            
            const timeAgo = getTimeAgo(post.createdAt);
            
            postCard.innerHTML = `
                <div class="flex items-start gap-4 mb-4">
                    <img src="${post.userAvatar}" alt="User" class="w-10 h-10 rounded-full">
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-1">
                            <h4 class="font-semibold text-white">${post.userName}</h4>
                            <span class="text-xs text-white/60">${timeAgo}</span>
                        </div>
                        <p class="text-white/90 mb-4">${post.content}</p>
                        
                        <!-- „Ç®„É≥„Ç≤„Éº„Ç∏„É°„É≥„Éà„É°„Éà„É™„ÇØ„Çπ -->
                        <div class="flex items-center gap-6 text-white/70">
                            <button onclick="likePost(this, '${post.id}')" class="flex items-center gap-2 hover:text-red-400 smooth-transition">
                                <i class="far fa-heart"></i>
                                <span>${post.likes}</span>
                            </button>
                            <button onclick="showComments('${post.id}')" class="flex items-center gap-2 hover:text-blue-400 smooth-transition">
                                <i class="far fa-comment"></i>
                                <span>${post.comments}</span>
                            </button>
                            <button onclick="retweetPost(this, '${post.id}')" class="flex items-center gap-2 hover:text-green-400 smooth-transition">
                                <i class="fas fa-retweet"></i>
                                <span>${post.shares}</span>
                            </button>
                            <button class="flex items-center gap-2 hover:text-yellow-400 smooth-transition">
                                <i class="fas fa-coins text-yellow-400"></i>
                                <span>${post.piEarned.toFixed(2)} testPi</span>
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            feed.insertBefore(postCard, feed.firstChild);
        }
        
        // „ÅÑ„ÅÑ„Å≠Âá¶ÁêÜ
        async function likePost(button, postId) {
            const icon = button.querySelector('i');
            const count = button.querySelector('span');
            
            if (icon.classList.contains('far')) {
                icon.classList.remove('far');
                icon.classList.add('fas');
                button.classList.add('text-red-400');
                count.textContent = parseInt(count.textContent) + 1;
                
                // ÊäïÁ®ø„Éá„Éº„Çø„ÇíÊõ¥Êñ∞
                await PostManager.updatePost(postId, { 
                    likes: parseInt(count.textContent)
                });
                
                // testPi„Çí‰ªò‰∏é
                const rewardAmount = 0.01;
                await updatePiBalance(rewardAmount);
                showRewardPopup(rewardAmount);
                
                // „Éü„ÉÉ„Ç∑„Éß„É≥ÈÄ≤Êçó„ÇíÊõ¥Êñ∞
                updateMissionProgress('likes');
            } else {
                icon.classList.remove('fas');
                icon.classList.add('far');
                button.classList.remove('text-red-400');
                count.textContent = parseInt(count.textContent) - 1;
                
                // ÊäïÁ®ø„Éá„Éº„Çø„ÇíÊõ¥Êñ∞
                await PostManager.updatePost(postId, { 
                    likes: parseInt(count.textContent)
                });
            }
        }
        
        // „É™„ÉÑ„Ç§„Éº„ÉàÂá¶ÁêÜ
        async function retweetPost(button, postId) {
            const count = button.querySelector('span');
            count.textContent = parseInt(count.textContent) + 1;
            
            // ÊäïÁ®ø„Éá„Éº„Çø„ÇíÊõ¥Êñ∞
            await PostManager.updatePost(postId, { 
                shares: parseInt(count.textContent)
            });
            
            // testPi„Çí‰ªò‰∏é
            const rewardAmount = 0.2;
            await updatePiBalance(rewardAmount);
            showRewardPopup(rewardAmount);
            
            showNotification('„É™„ÉÑ„Ç§„Éº„Éà„Åó„Åæ„Åó„Åü');
        }
        
        // „Éü„ÉÉ„Ç∑„Éß„É≥ÈÄ≤ÊçóÊõ¥Êñ∞
        function updateMissionProgress(missionId) {
            const today = new Date().toISOString().split('T')[0];
            const missionKey = `mission_${missionId}_${today}`;
            
            // ÁèæÂú®„ÅÆÈÄ≤Êçó„ÇíÂèñÂæó
            let progress = parseInt(localStorage.getItem(missionKey) || '0');
            progress += 1;
            
            // ÈÄ≤Êçó„Çí‰øùÂ≠ò
            localStorage.setItem(missionKey, progress.toString());
            
            // „Éü„ÉÉ„Ç∑„Éß„É≥ÂÆå‰∫Ü„ÉÅ„Çß„ÉÉ„ÇØ
            const missions = {
                posts: { target: 3, reward: 5 },
                likes: { target: 10, reward: 3 },
                comments: { target: 5, reward: 4 }
            };
            
            const mission = missions[missionId];
            if (mission && progress >= mission.target) {
                // Â†±ÈÖ¨„Çí‰ªò‰∏é
                updatePiBalance(mission.reward);
                showRewardPopup(mission.reward);
                showNotification(`„Éü„ÉÉ„Ç∑„Éß„É≥ÂÆå‰∫ÜÔºÅ${mission.reward} testPiÁç≤ÂæóÔºÅ`);
            }
        }
        
        // „Éã„É•„Éº„ÇπË™≠„ÅøËæº„Åø
        async function loadNews() {
            const news = await NewsManager.getNews();
            
            if (news.length === 0) {
                // ÂàùÊúü„Éã„É•„Éº„Çπ„Éá„Éº„Çø„ÇíËøΩÂä†
                const initialNews = [
                    {
                        title: 'Pi„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„ÄÅÊñ∞Ë¶è„Éë„Éº„Éà„Éä„Éº„Ç∑„ÉÉ„Éó„ÇíÁô∫Ë°®',
                        source: 'Pi Network Official',
                        time: '2ÊôÇÈñìÂâç',
                        category: 'partnership',
                        content: 'Pi„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„ÅØÊú¨Êó•„ÄÅÂ§ßÊâãe„Ç≥„Éû„Éº„Çπ„Éó„É©„ÉÉ„Éà„Éï„Ç©„Éº„É†„Å®„ÅÆÊà¶Áï•ÁöÑ„Éë„Éº„Éà„Éä„Éº„Ç∑„ÉÉ„Éó„ÇíÁô∫Ë°®„Åó„Åæ„Åó„Åü„ÄÇ„Åì„ÅÆÊèêÊê∫„Å´„Çà„Çä„ÄÅPi„ÅÆÂÆüÁî®ÊÄß„ÅåÂ§ßÂπÖ„Å´Âêë‰∏ä„Åô„ÇãË¶ãËæº„Åø„Åß„Åô„ÄÇ',
                        image: 'https://picsum.photos/seed/news1/600/400.jpg',
                        credibility: 85
                    },
                    {
                        title: 'Pi‰æ°Ê†º„ÄÅÈÅéÂéªÊúÄÈ´òÂÄ§„ÇíÊõ¥Êñ∞',
                        source: 'CryptoNews',
                        time: '5ÊôÇÈñìÂâç',
                        category: 'price',
                        content: 'Pi„ÅÆ‰æ°Ê†º„ÅåÊú¨Êó•„ÄÅÈÅéÂéªÊúÄÈ´òÂÄ§„ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„Åü„ÄÇÂ∏ÇÂ†¥„ÅÆÊúüÂæÖÊÑü„ÅåÈ´ò„Åæ„Å£„Å¶„Åä„Çä„ÄÅ‰ªäÂæå„ÅÆÂÄ§Âãï„Åç„ÅåÊ≥®ÁõÆ„Åï„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ',
                        image: 'https://picsum.photos/seed/news2/600/400.jpg',
                        credibility: 72
                    },
                    {
                        title: 'Pi„Ç¢„Éó„É™ÈñãÁô∫ËÄÖÂêë„ÅëSDK„Åå„Ç¢„ÉÉ„Éó„Éá„Éº„Éà',
                        source: 'Pi Developer Portal',
                        time: '1Êó•Ââç',
                        category: 'update',
                        content: 'Pi„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„ÅØ„ÄÅ„Ç¢„Éó„É™ÈñãÁô∫ËÄÖÂêë„Åë„ÅÆSDK„ÇíÂ§ßÂπÖ„Å´„Ç¢„ÉÉ„Éó„Éá„Éº„Éà„Åó„Åæ„Åó„Åü„ÄÇÊñ∞Ê©üËÉΩ„Å´„Çà„Çä„ÄÅÈñãÁô∫ËÄÖ„ÅØ„Çà„ÇäÁ∞°Âçò„Å´Pi„ÇíÁµ±Âêà„Åß„Åç„Çã„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇ',
                        image: 'https://picsum.photos/seed/news3/600/400.jpg',
                        credibility: 95
                    }
                ];
                
                await NewsManager.saveNews(initialNews);
                loadNews();
                return;
            }
            
            // „Éà„É¨„É≥„Éâ„Éã„É•„Éº„Çπ„ÇíË°®Á§∫
            const trendingNewsContainer = document.getElementById('trendingNews');
            trendingNewsContainer.innerHTML = '';
            
            news.slice(0, 2).forEach(newsItem => {
                const newsCard = document.createElement('div');
                newsCard.className = 'glass-effect rounded-2xl overflow-hidden cursor-pointer';
                newsCard.onclick = () => showNewsDetail(newsItem);
                
                newsCard.innerHTML = `
                    <div class="h-40 overflow-hidden">
                        <img src="${newsItem.image}" alt="${newsItem.title}" class="w-full h-full object-cover">
                    </div>
                    <div class="p-4">
                        <div class="flex items-center gap-2 mb-2">
                            <span class="text-xs text-white/60">${newsItem.source}</span>
                            <span class="text-xs text-white/60">‚Ä¢</span>
                            <span class="text-xs text-white/60">${newsItem.time}</span>
                        </div>
                        <h3 class="font-bold text-white mb-2">${newsItem.title}</h3>
                        <div class="flex items-center justify-between">
                            <span class="text-xs px-2 py-1 rounded-full bg-white/20">${getCategoryName(newsItem.category)}</span>
                            <div class="flex items-center gap-1">
                                <i class="fas fa-balance-scale text-xs ${getCredibilityColor(newsItem.credibility)}"></i>
                                <span class="text-xs ${getCredibilityColor(newsItem.credibility)}">${newsItem.credibility}%</span>
                            </div>
                        </div>
                    </div>
                `;
                
                trendingNewsContainer.appendChild(newsCard);
            });
            
            // „Éã„É•„Éº„Çπ„É™„Çπ„Éà„ÇíË°®Á§∫
            const newsListContainer = document.getElementById('newsList');
            newsListContainer.innerHTML = '';
            
            news.forEach(newsItem => {
                const newsItemElement = document.createElement('div');
                newsItemElement.className = 'glass-effect rounded-2xl p-4 cursor-pointer';
                newsItemElement.onclick = () => showNewsDetail(newsItem);
                
                newsItemElement.innerHTML = `
                    <div class="flex gap-4">
                        <div class="w-24 h-24 rounded-xl overflow-hidden flex-shrink-0">
                            <img src="${newsItem.image}" alt="${newsItem.title}" class="w-full h-full object-cover">
                        </div>
                        <div class="flex-1">
                            <div class="flex items-center gap-2 mb-1">
                                <span class="text-xs text-white/60">${newsItem.source}</span>
                                <span class="text-xs text-white/60">‚Ä¢</span>
                                <span class="text-xs text-white/60">${newsItem.time}</span>
                            </div>
                            <h3 class="font-bold text-white mb-2">${newsItem.title}</h3>
                            <p class="text-white/70 text-sm mb-2 line-clamp-2">${newsItem.content}</p>
                            <div class="flex items-center justify-between">
                                <span class="text-xs px-2 py-1 rounded-full bg-white/20">${getCategoryName(newsItem.category)}</span>
                                <div class="flex items-center gap-1">
                                    <i class="fas fa-balance-scale text-xs ${getCredibilityColor(newsItem.credibility)}"></i>
                                    <span class="text-xs ${getCredibilityColor(newsItem.credibility)}">${newsItem.credibility}%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                newsListContainer.appendChild(newsItemElement);
            });
            
            // ÊúÄÁµÇÊõ¥Êñ∞ÊôÇÂàª„ÇíÊõ¥Êñ∞
            document.getElementById('lastUpdate').textContent = new Date().toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' });
        }
        
        // „Éã„É•„Éº„ÇπË©≥Á¥∞Ë°®Á§∫
        function showNewsDetail(newsItem) {
            const modal = document.getElementById('newsDetailModal');
            const content = document.getElementById('newsContent');
            
            content.innerHTML = `
                <div class="mb-6">
                    <div class="flex items-center gap-2 mb-4">
                        <span class="text-xs text-white/60">${newsItem.source}</span>
                        <span class="text-xs text-white/60">‚Ä¢</span>
                        <span class="text-xs text-white/60">${newsItem.time}</span>
                    </div>
                    <h1 class="text-3xl font-bold text-white mb-4">${newsItem.title}</h1>
                    <div class="flex items-center gap-2 mb-4">
                        <span class="text-xs px-2 py-1 rounded-full bg-white/20">${getCategoryName(newsItem.category)}</span>
                        <div class="flex items-center gap-1">
                            <i class="fas fa-balance-scale text-xs ${getCredibilityColor(newsItem.credibility)}"></i>
                            <span class="text-xs ${getCredibilityColor(newsItem.credibility)}">${newsItem.credibility}%</span>
                        </div>
                    </div>
                </div>
                
                <div class="rounded-2xl overflow-hidden mb-6">
                    <img src="${newsItem.image}" alt="${newsItem.title}" class="w-full">
                </div>
                
                <div class="prose prose-invert max-w-none">
                    <p class="text-white/90 mb-4">${newsItem.content}</p>
                    <p class="text-white/90 mb-4">Pi„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„ÅÆ„Ç≥„Éü„É•„Éã„ÉÜ„Ç£„ÅØ„ÄÅ„Åì„ÅÆ„Éã„É•„Éº„Çπ„Å´„Å§„ÅÑ„Å¶Ê¥ªÁô∫„Å´Ë≠∞Ë´ñ„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ‰ø°ÊÜëÊÄßÊäïÁ•®„Å´ÂèÇÂä†„Åó„Å¶„ÄÅ„ÅÇ„Å™„Åü„ÅÆÊÑèË¶ã„ÇíÂÖ±Êúâ„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ</p>
                </div>
            `;
            
            // ‰ø°ÊÜëÊÄß„Çπ„Ç≥„Ç¢„ÇíË®≠ÂÆö
            document.getElementById('credibilityScore').textContent = newsItem.credibility;
            document.getElementById('credibilityBar').style.width = `${newsItem.credibility}%`;
            
            // ‰ø°ÊÜëÊÄß„Çπ„Ç≥„Ç¢„Å´Âøú„Åò„Å¶Ëâ≤„ÇíÂ§âÊõ¥
            const credibilityBar = document.getElementById('credibilityBar');
            credibilityBar.classList.remove('credibility-high', 'credibility-medium', 'credibility-low');
            
            if (newsItem.credibility >= 80) {
                credibilityBar.classList.add('credibility-high');
            } else if (newsItem.credibility >= 50) {
                credibilityBar.classList.add('credibility-medium');
            } else {
                credibilityBar.classList.add('credibility-low');
            }
            
            modal.classList.remove('hidden');
        }
        
        // „Éã„É•„Éº„ÇπË©≥Á¥∞„ÇíÈñâ„Åò„Çã
        function closeNewsDetail() {
            document.getElementById('newsDetailModal').classList.add('hidden');
        }
        
        // ‰ø°ÊÜëÊÄßÊäïÁ•®
        async function voteCredibility(voteType) {
            const trustCount = document.getElementById('trustCount');
            const doubtCount = document.getElementById('doubtCount');
            const credibilityScore = document.getElementById('credibilityScore');
            const credibilityBar = document.getElementById('credibilityBar');
            
            if (voteType === 'trust') {
                trustCount.textContent = parseInt(trustCount.textContent) + 1;
            } else {
                doubtCount.textContent = parseInt(doubtCount.textContent) + 1;
            }
            
            // ‰ø°ÊÜëÊÄß„Çπ„Ç≥„Ç¢„ÇíÂÜçË®àÁÆó
            const trust = parseInt(trustCount.textContent);
            const doubt = parseInt(doubtCount.textContent);
            const total = trust + doubt;
            const score = Math.round((trust / total) * 100);
            
            credibilityScore.textContent = score;
            credibilityBar.style.width = `${score}%`;
            
            // ‰ø°ÊÜëÊÄß„Çπ„Ç≥„Ç¢„Å´Âøú„Åò„Å¶Ëâ≤„ÇíÂ§âÊõ¥
            credibilityBar.classList.remove('credibility-high', 'credibility-medium', 'credibility-low');
            
            if (score >= 80) {
                credibilityBar.classList.add('credibility-high');
            } else if (score >= 50) {
                credibilityBar.classList.add('credibility-medium');
            } else {
                credibilityBar.classList.add('credibility-low');
            }
            
            // testPi„Çí‰ªò‰∏é
            const rewardAmount = 0.05;
            await updatePiBalance(rewardAmount);
            showRewardPopup(rewardAmount);
            
            showNotification('ÊäïÁ•®„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô');
        }
        
        // „Ç≥„É°„É≥„ÉàÊäïÁ®ø
        async function postComment() {
            const input = document.getElementById('commentInput');
            const content = input.value.trim();
            
            if (!content) {
                showNotification('„Ç≥„É°„É≥„ÉàÂÜÖÂÆπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            const user = UserDataManager.getCurrentUser();
            if (!user) {
                showNotification('Ë™çË®º„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }
            
            const userData = await UserDataManager.getUserData(user.uid);
            if (!userData) {
                showNotification('„É¶„Éº„Ç∂„Éº„Éá„Éº„Çø„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                return;
            }
            
            // „Ç≥„É°„É≥„Éà„Çí‰ΩúÊàê
            const comment = {
                userId: user.uid,
                userName: userData.name,
                userAvatar: userData.avatar,
                content: content,
                timestamp: new Date().toISOString()
            };
            
            // UI„Å´„Ç≥„É°„É≥„Éà„ÇíËøΩÂä†
            addCommentToUI(comment);
            
            // ÂÖ•Âäõ„Çí„ÇØ„É™„Ç¢
            input.value = '';
            
            // testPi„Çí‰ªò‰∏é
            const rewardAmount = 0.1;
            await updatePiBalance(rewardAmount);
            showRewardPopup(rewardAmount);
            
            // „Éü„ÉÉ„Ç∑„Éß„É≥ÈÄ≤Êçó„ÇíÊõ¥Êñ∞
            updateMissionProgress('comments');
            
            showNotification('„Ç≥„É°„É≥„Éà„ÅåÊäïÁ®ø„Åï„Çå„Åæ„Åó„Åü');
        }
        
        // „Ç≥„É°„É≥„Éà„ÇíUI„Å´ËøΩÂä†
        function addCommentToUI(comment) {
            const commentsList = document.getElementById('commentsList');
            const commentItem = document.createElement('div');
            commentItem.className = 'flex gap-3';
            
            const timeAgo = getTimeAgo(new Date(comment.timestamp));
            
            commentItem.innerHTML = `
                <img src="${comment.userAvatar}" alt="User" class="w-10 h-10 rounded-full">
                <div class="flex-1">
                    <div class="flex items-center gap-2 mb-1">
                        <h4 class="font-semibold text-white">${comment.userName}</h4>
                        <span class="text-xs text-white/60">${timeAgo}</span>
                    </div>
                    <p class="text-white/90">${comment.content}</p>
                </div>
            `;
            
            commentsList.insertBefore(commentItem, commentsList.firstChild);
        }
        
        // „Ç∑„Éß„Éº„ÉàÂãïÁîªË™≠„ÅøËæº„Åø
        async function loadReels() {
            const reels = await ReelManager.getReels();
            const reelsContainer = document.getElementById('reelsContainer');
            reelsContainer.innerHTML = '';
            
            if (reels.length === 0) {
                // „Éá„É¢Áî®„ÅÆ„Çµ„É≥„Éó„É´ÂãïÁîª„ÇíËøΩÂä†
                const sampleReels = [
                    {
                        title: 'Pi„Éç„ÉÉ„Éà„ÉØ„Éº„ÇØ„ÅÆÊú™Êù•',
                        user: 'Pi Enthusiast',
                        userId: 'user1',
                        userAvatar: 'https://picsum.photos/seed/user1/40/40.jpg',
                        views: 12450,
                        likes: 3420,
                        comments: 128,
                        videoUrl: 'https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4'
                    },
                    {
                        title: '‰ªäÊó•„ÅÆPi‰æ°Ê†ºÂàÜÊûê',
                        user: 'Crypto Analyst',
                        userId: 'user2',
                        userAvatar: 'https://picsum.photos/seed/user2/40/40.jpg',
                        views: 8760,
                        likes: 2150,
                        comments: 87,
                        videoUrl: 'https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4'
                    },
                    {
                        title: 'Pi„Éû„Ç§„Éã„É≥„Ç∞„ÉÅ„É•„Éº„Éà„É™„Ç¢„É´',
                        user: 'Pi Miner',
                        userId: 'user3',
                        userAvatar: 'https://picsum.photos/seed/user3/40/40.jpg',
                        views: 15320,
                        likes: 4320,
                        comments: 210,
                        videoUrl: 'https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4'
                    }
                ];
                
                for (const reel of sampleReels) {
                    await ReelManager.addReel(reel);
                }
                
                loadReels();
                return;
            }
            
            reels.forEach(reel => {
                const reelItem = document.createElement('div');
                reelItem.className = 'reel-item';
                
                reelItem.innerHTML = `
                    <video class="reel-video" src="${reel.videoUrl}" controls></video>
                    <div class="reel-overlay">
                        <h3 class="text-xl font-bold text-white mb-2">${reel.title}</h3>
                        <div class="flex items-center gap-2 mb-4">
                            <img src="${reel.userAvatar}" alt="User" class="w-8 h-8 rounded-full">
                            <p class="text-white/80">@${reel.user}</p>
                        </div>
                    </div>
                    <div class="reel-actions">
                        <button class="reel-action-btn" onclick="likeReel(this, '${reel.id}')">
                            <i class="far fa-heart"></i>
                        </button>
                        <div class="text-white text-sm text-center">${formatNumber(reel.likes)}</div>
                        
                        <button class="reel-action-btn" onclick="commentReel(this, '${reel.id}')">
                            <i class="far fa-comment"></i>
                        </button>
                        <div class="text-white text-sm text-center">${formatNumber(reel.comments)}</div>
                        
                        <button class="reel-action-btn" onclick="shareReel(this, '${reel.id}')">
                            <i class="far fa-share-square"></i>
                        </button>
                    </div>
                `;
                
                reelsContainer.appendChild(reelItem);
            });
        }
        
        // „Ç∑„Éß„Éº„ÉàÂãïÁîª„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„É¢„Éº„ÉÄ„É´Ë°®Á§∫
        function showReelUpload() {
            document.getElementById('reelUploadModal').classList.remove('hidden');
        }
        
        // „Ç∑„Éß„Éº„ÉàÂãïÁîª„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„É¢„Éº„ÉÄ„É´„ÇíÈñâ„Åò„Çã
        function closeReelUpload() {
            document.getElementById('reelUploadModal').classList.add('hidden');
            // „Éï„Ç©„Éº„É†„Çí„É™„Çª„ÉÉ„Éà
            document.getElementById('reelCaption').value = '';
            document.getElementById('reelHashtags').value = '';
            document.getElementById('videoPreview').classList.add('hidden');
            document.getElementById('previewVideo').src = '';
        }
        
        // ÂãïÁîª„Ç¢„ÉÉ„Éó„É≠„Éº„ÉâÂá¶ÁêÜ
        function handleVideoUpload(input) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const videoPreview = document.getElementById('videoPreview');
                    const previewVideo = document.getElementById('previewVideo');
                    
                    previewVideo.src = e.target.result;
                    videoPreview.classList.remove('hidden');
                };
                reader.readAsDataURL(file);
            }
        }
        
        // „Ç∑„Éß„Éº„ÉàÂãïÁîª„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ
        async function uploadReel() {
            const caption = document.getElementById('reelCaption').value.trim();
            const hashtags = document.getElementById('reelHashtags').value.trim();
            const videoFile = document.getElementById('videoUpload').files[0];
            
            if (!videoFile) {
                showNotification('ÂãïÁîª„Éï„Ç°„Ç§„É´„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            if (!caption) {
                showNotification('„Ç≠„É£„Éó„Ç∑„Éß„É≥„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            const user = UserDataManager.getCurrentUser();
            if (!user) {
                showNotification('Ë™çË®º„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }
            
            const userData = await UserDataManager.getUserData(user.uid);
            if (!userData) {
                showNotification('„É¶„Éº„Ç∂„Éº„Éá„Éº„Çø„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                return;
            }
            
            // „Ç¢„ÉÉ„Éó„É≠„Éº„ÉâÂá¶ÁêÜ
            showNotification('ÂãïÁîª„Çí„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Åó„Å¶„ÅÑ„Åæ„Åô...');
            
            try {
                // ÂãïÁîª„ÇíFirebase Storage„Å´„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ
                const videoUrl = await ReelManager.uploadVideo(videoFile);
                
                if (!videoUrl) {
                    showNotification('ÂãïÁîª„ÅÆ„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                    return;
                }
                
                // „É™„Éº„É´„Çí‰ΩúÊàê
                const reel = {
                    userId: user.uid,
                    userName: userData.name,
                    userAvatar: userData.avatar,
                    title: caption,
                    hashtags: hashtags,
                    videoUrl: videoUrl,
                    views: 0,
                    likes: 0,
                    comments: 0
                };
                
                // „É™„Éº„É´„Çí‰øùÂ≠ò
                const savedReel = await ReelManager.addReel(reel);
                
                if (savedReel) {
                    closeReelUpload();
                    
                    // testPi„Çí‰ªò‰∏é
                    const rewardAmount = 5.0;
                    await updatePiBalance(rewardAmount);
                    showRewardPopup(rewardAmount);
                    
                    showNotification('ÂãïÁîª„Åå„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Åï„Çå„Åæ„Åó„ÅüÔºÅ');
                    
                    // „Ç∑„Éß„Éº„Éà„Çø„Éñ„Å´Âàá„ÇäÊõø„Åà„Å¶Êõ¥Êñ∞
                    switchTab('reels');
                } else {
                    showNotification('ÂãïÁîª„ÅÆ‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                }
            } catch (error) {
                console.error('Error uploading reel:', error);
                showNotification('„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ‰∏≠„Å´„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„Åü');
            }
        }
        
        // „Ç∑„Éß„Éº„ÉàÂãïÁîª„ÅÆ„ÅÑ„ÅÑ„Å≠
        async function likeReel(button, reelId) {
            const icon = button.querySelector('i');
            const countElement = button.nextElementSibling;
            
            if (icon.classList.contains('far')) {
                icon.classList.remove('far');
                icon.classList.add('fas');
                button.classList.add('active');
                
                const count = parseInt(countElement.textContent) + 1;
                countElement.textContent = count;
                
                // „É™„Éº„É´„Éá„Éº„Çø„ÇíÊõ¥Êñ∞
                await ReelManager.updateReel(reelId, { likes: count });
                
                // testPi„Çí‰ªò‰∏é
                const rewardAmount = 0.02;
                await updatePiBalance(rewardAmount);
                showRewardPopup(rewardAmount);
            } else {
                icon.classList.remove('fas');
                icon.classList.add('far');
                button.classList.remove('active');
                
                const count = parseInt(countElement.textContent) - 1;
                countElement.textContent = count;
                
                // „É™„Éº„É´„Éá„Éº„Çø„ÇíÊõ¥Êñ∞
                await ReelManager.updateReel(reelId, { likes: count });
            }
        }
        
        // „Ç∑„Éß„Éº„ÉàÂãïÁîª„ÅÆ„Ç≥„É°„É≥„Éà
        function commentReel(button, reelId) {
            showNotification('„Ç≥„É°„É≥„ÉàÊ©üËÉΩ„ÅØÊ∫ñÂÇô‰∏≠„Åß„Åô');
        }
        
        // „Ç∑„Éß„Éº„ÉàÂãïÁîª„ÅÆ„Ç∑„Çß„Ç¢
        function shareReel(button, reelId) {
            showNotification('„Ç∑„Çß„Ç¢Ê©üËÉΩ„ÅØÊ∫ñÂÇô‰∏≠„Åß„Åô');
        }
        
        // „ÉÅ„É£„ÉÉ„ÉàË™≠„ÅøËæº„Åø
        async function loadChat() {
            const chatRooms = await ChatRoomManager.getChatRooms();
            const chatRoomsContainer = document.getElementById('chatRooms');
            chatRoomsContainer.innerHTML = '';
            
            if (chatRooms.length === 0) {
                // ÂàùÊúü„ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†„ÇíËøΩÂä†
                const initialRooms = [
                    {
                        name: '‰∏ÄËà¨',
                        description: 'ÂÖ®Ëà¨„ÉÅ„É£„ÉÉ„Éà',
                        icon: 'fas fa-hashtag',
                        createdBy: 'system'
                    },
                    {
                        name: 'Pi‰æ°Ê†º',
                        description: '‰æ°Ê†ºÊÉÖÂ†±‰∫§Êèõ',
                        icon: 'fas fa-chart-line',
                        createdBy: 'system'
                    },
                    {
                        name: '„Éû„Ç§„Éã„É≥„Ç∞',
                        description: '„Éû„Ç§„Éã„É≥„Ç∞ÊÉÖÂ†±',
                        icon: 'fas fa-coins',
                        createdBy: 'system'
                    },
                    {
                        name: '„Ç®„Ç≥„Ç∑„Çπ„ÉÜ„É†',
                        description: '„Ç®„Ç≥„Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†±',
                        icon: 'fas fa-infinity',
                        createdBy: 'system'
                    }
                ];
                
                for (const room of initialRooms) {
                    await ChatRoomManager.addChatRoom(room);
                }
                
                loadChat();
                return;
            }
            
            chatRooms.forEach(room => {
                const roomItem = document.createElement('div');
                roomItem.className = 'chat-room-item';
                roomItem.onclick = () => selectChatRoom(room.id);
                
                const isAdmin = UserDataManager.isAdmin();
                
                roomItem.innerHTML = `
                    <div class="flex items-center gap-3">
                        <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl flex items-center justify-center">
                            <i class="${room.icon} text-white"></i>
                        </div>
                        <div>
                            <h4 class="font-semibold text-white">${room.name}</h4>
                            <p class="text-xs text-white/60">${room.description}</p>
                        </div>
                    </div>
                    ${isAdmin ? `
                        <div class="chat-room-admin-controls">
                            <button class="chat-room-admin-btn" onclick="event.stopPropagation(); editChatRoom('${room.id}')" title="Á∑®ÈõÜ">
                                <i class="fas fa-edit text-white"></i>
                            </button>
                            <button class="chat-room-admin-btn" onclick="event.stopPropagation(); deleteChatRoom('${room.id}')" title="ÂâäÈô§">
                                <i class="fas fa-trash text-white"></i>
                            </button>
                        </div>
                    ` : ''}
                `;
                
                chatRoomsContainer.appendChild(roomItem);
            });
            
            // ÊúÄÂàù„ÅÆ„É´„Éº„É†„ÇíÈÅ∏Êäû
            if (chatRooms.length > 0) {
                selectChatRoom(chatRooms[0].id);
            }
        }
        
        // „ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†„ÇíÈÅ∏Êäû
        async function selectChatRoom(roomId) {
            currentChatRoom = roomId;
            
            // „ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†ÊÉÖÂ†±„ÇíÊõ¥Êñ∞
            const rooms = await ChatRoomManager.getChatRooms();
            const room = rooms.find(r => r.id === roomId);
            
            if (room) {
                document.getElementById('chatRoomTitle').textContent = room.name;
                document.getElementById('chatRoomDescription').textContent = room.description;
            }
            
            // „ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†„É™„Çπ„Éà„ÅÆ„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÁä∂ÊÖã„ÇíÊõ¥Êñ∞
            document.querySelectorAll('.chat-room-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const activeItem = document.querySelector(`[onclick="selectChatRoom('${roomId}')"]`);
            if (activeItem) {
                activeItem.classList.add('active');
            }
            
            // „ÉÅ„É£„ÉÉ„Éà„É°„ÉÉ„Çª„Éº„Ç∏„ÇíË°®Á§∫
            loadChatMessages(roomId);
        }
        
        // „ÉÅ„É£„ÉÉ„Éà„É°„ÉÉ„Çª„Éº„Ç∏„ÇíË™≠„ÅøËæº„Åø
        async function loadChatMessages(roomId) {
            const messages = await ChatRoomManager.getChatMessages(roomId);
            const messagesContainer = document.getElementById('chatMessages');
            messagesContainer.innerHTML = '';
            
            if (messages.length === 0) {
                // „Éá„É¢Áî®„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏„ÇíËøΩÂä†
                const demoMessages = [
                    {
                        userId: 'user1',
                        userName: 'Â±±Áî∞Â§™ÈÉé',
                        userAvatar: 'https://picsum.photos/seed/user1/40/40.jpg',
                        content: '„Åì„Çì„Å´„Å°„ÅØÔºÅLooPin„Å∏„Çà„ÅÜ„Åì„ÅùÔºÅ',
                        timestamp: new Date(Date.now() - 3600000).toISOString()
                    },
                    {
                        userId: 'user2',
                        userName: '‰ΩêËó§Ëä±Â≠ê',
                        userAvatar: 'https://picsum.photos/seed/user2/40/40.jpg',
                        content: 'testPi„ÇíÁç≤Âæó„Åô„Çã„Å´„ÅØ„ÄÅÊäïÁ®ø„ÇÑ„Ç≥„É°„É≥„Éà„Çí„Åó„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑÔºÅ',
                        timestamp: new Date(Date.now() - 1800000).toISOString()
                    }
                ];
                
                for (const message of demoMessages) {
                    await ChatRoomManager.addChatMessage({
                        ...message,
                        roomId: roomId
                    });
                }
                
                loadChatMessages(roomId);
                return;
            }
            
            messages.forEach(message => {
                addChatMessageToUI(message);
            });
            
            // „É°„ÉÉ„Çª„Éº„Ç∏„Ç≥„É≥„ÉÜ„Éä„Çí‰∏ÄÁï™‰∏ã„Å´„Çπ„ÇØ„É≠„Éº„É´
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }
        
        // „ÉÅ„É£„ÉÉ„Éà„É°„ÉÉ„Çª„Éº„Ç∏„ÇíUI„Å´ËøΩÂä†
        function addChatMessageToUI(message) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageElement = document.createElement('div');
            
            const user = UserDataManager.getCurrentUser();
            const isOwn = user && user.uid === message.userId;
            
            if (isOwn) {
                messageElement.className = 'chat-message chat-message-own';
                messageElement.innerHTML = `
                    <div class="flex items-start gap-3 justify-end">
                        <div>
                            <div class="flex items-center gap-2 mb-1 justify-end">
                                <span class="text-xs text-white/60">${formatTime(message.timestamp)}</span>
                                <h4 class="font-semibold text-white text-sm">${message.userName}</h4>
                            </div>
                            <div class="chat-message-bubble">
                                ${message.content}
                            </div>
                        </div>
                        <img src="${message.userAvatar}" alt="User" class="w-8 h-8 rounded-full">
                    </div>
                `;
            } else {
                messageElement.className = 'chat-message chat-message-other';
                messageElement.innerHTML = `
                    <div class="flex items-start gap-3">
                        <img src="${message.userAvatar}" alt="User" class="w-8 h-8 rounded-full">
                        <div>
                            <div class="flex items-center gap-2 mb-1">
                                <h4 class="font-semibold text-white text-sm">${message.userName}</h4>
                                <span class="text-xs text-white/60">${formatTime(message.timestamp)}</span>
                            </div>
                            <div class="chat-message-bubble">
                                ${message.content}
                            </div>
                        </div>
                    </div>
                `;
            }
            
            messagesContainer.appendChild(messageElement);
        }
        
        // „ÉÅ„É£„ÉÉ„Éà„É°„ÉÉ„Çª„Éº„Ç∏ÈÄÅ‰ø°
        async function sendChatMessage() {
            const input = document.getElementById('chatInput');
            const content = input.value.trim();
            
            if (!content) {
                return;
            }
            
            const user = UserDataManager.getCurrentUser();
            if (!user) {
                showNotification('Ë™çË®º„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }
            
            const userData = await UserDataManager.getUserData(user.uid);
            if (!userData) {
                showNotification('„É¶„Éº„Ç∂„Éº„Éá„Éº„Çø„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                return;
            }
            
            // „É°„ÉÉ„Çª„Éº„Ç∏„Çí‰ΩúÊàê
            const message = {
                roomId: currentChatRoom,
                userId: user.uid,
                userName: userData.name,
                userAvatar: userData.avatar,
                content: content,
                timestamp: new Date().toISOString()
            };
            
            // „É°„ÉÉ„Çª„Éº„Ç∏„Çí‰øùÂ≠ò
            const savedMessage = await ChatRoomManager.addChatMessage(message);
            
            if (savedMessage) {
                // UI„Å´„É°„ÉÉ„Çª„Éº„Ç∏„ÇíËøΩÂä†
                addChatMessageToUI(savedMessage);
                
                // ÂÖ•Âäõ„Çí„ÇØ„É™„Ç¢
                input.value = '';
                
                // „É°„ÉÉ„Çª„Éº„Ç∏„Ç≥„É≥„ÉÜ„Éä„Çí‰∏ÄÁï™‰∏ã„Å´„Çπ„ÇØ„É≠„Éº„É´
                const messagesContainer = document.getElementById('chatMessages');
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
                
                // testPi„Çí‰ªò‰∏é
                const rewardAmount = 0.05;
                await updatePiBalance(rewardAmount);
                showRewardPopup(rewardAmount);
            }
        }
        
        // „ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†ËøΩÂä†„É¢„Éº„ÉÄ„É´Ë°®Á§∫
        function showAddChatRoom() {
            if (!UserDataManager.isAdmin()) {
                showNotification('„Åì„ÅÆÊìç‰Ωú„Å´„ÅØÁÆ°ÁêÜËÄÖÊ®©Èôê„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }
            
            document.getElementById('chatRoomModalTitle').textContent = '„ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†„ÇíËøΩÂä†';
            document.getElementById('chatRoomName').value = '';
            document.getElementById('chatRoomDescription').value = '';
            selectedChatRoomIcon = 'fas fa-hashtag';
            
            // „Ç¢„Ç§„Ç≥„É≥ÈÅ∏Êäû„Çí„É™„Çª„ÉÉ„Éà
            document.querySelectorAll('.chat-room-icon-btn').forEach(btn => {
                btn.classList.remove('bg-white/30');
            });
            document.querySelector('[onclick="selectChatRoomIcon(\'fas fa-hashtag\')"]').classList.add('bg-white/30');
            
            document.getElementById('chatRoomModal').classList.remove('hidden');
        }
        
        // „ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†Á∑®ÈõÜ
        async function editChatRoom(roomId) {
            if (!UserDataManager.isAdmin()) {
                showNotification('„Åì„ÅÆÊìç‰Ωú„Å´„ÅØÁÆ°ÁêÜËÄÖÊ®©Èôê„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }
            
            const rooms = await ChatRoomManager.getChatRooms();
            const room = rooms.find(r => r.id === roomId);
            
            if (room) {
                document.getElementById('chatRoomModalTitle').textContent = '„ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†„ÇíÁ∑®ÈõÜ';
                document.getElementById('chatRoomName').value = room.name;
                document.getElementById('chatRoomDescription').value = room.description;
                selectedChatRoomIcon = room.icon;
                selectedChatRoomId = roomId;
                
                // „Ç¢„Ç§„Ç≥„É≥ÈÅ∏Êäû„ÇíÊõ¥Êñ∞
                document.querySelectorAll('.chat-room-icon-btn').forEach(btn => {
                    btn.classList.remove('bg-white/30');
                });
                document.querySelector(`[onclick="selectChatRoomIcon('${room.icon}')"]`).classList.add('bg-white/30');
                
                document.getElementById('chatRoomModal').classList.remove('hidden');
            }
        }
        
        // „ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†ÂâäÈô§
        async function deleteChatRoom(roomId) {
            if (!UserDataManager.isAdmin()) {
                showNotification('„Åì„ÅÆÊìç‰Ωú„Å´„ÅØÁÆ°ÁêÜËÄÖÊ®©Èôê„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }
            
            if (confirm('Êú¨ÂΩì„Å´„Åì„ÅÆ„ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†„ÇíÂâäÈô§„Åó„Åæ„Åô„ÅãÔºü')) {
                const success = await ChatRoomManager.deleteChatRoom(roomId);
                if (success) {
                    showNotification('„ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†„ÇíÂâäÈô§„Åó„Åæ„Åó„Åü');
                    loadChat();
                } else {
                    showNotification('ÂâäÈô§„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                }
            }
        }
        
        // „ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†„Ç¢„Ç§„Ç≥„É≥ÈÅ∏Êäû
        let selectedChatRoomIcon = 'fas fa-hashtag';
        let selectedChatRoomId = null;
        
        function selectChatRoomIcon(icon) {
            selectedChatRoomIcon = icon;
            
            // ÈÅ∏ÊäûÁä∂ÊÖã„ÇíÊõ¥Êñ∞
            document.querySelectorAll('.chat-room-icon-btn').forEach(btn => {
                btn.classList.remove('bg-white/30');
            });
            event.target.closest('.chat-room-icon-btn').classList.add('bg-white/30');
        }
        
        // „ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†„É¢„Éº„ÉÄ„É´„ÇíÈñâ„Åò„Çã
        function closeChatRoomModal() {
            document.getElementById('chatRoomModal').classList.add('hidden');
            selectedChatRoomId = null;
        }
        
        // „ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†‰øùÂ≠ò
        async function saveChatRoom() {
            const name = document.getElementById('chatRoomName').value.trim();
            const description = document.getElementById('chatRoomDescription').value.trim();
            
            if (!name) {
                showNotification('„É´„Éº„É†Âêç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            if (!description) {
                showNotification('Ë™¨Êòé„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            const user = UserDataManager.getCurrentUser();
            if (!user) {
                showNotification('Ë™çË®º„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }
            
            if (selectedChatRoomId) {
                // Á∑®ÈõÜ
                const success = await ChatRoomManager.updateChatRoom(selectedChatRoomId, {
                    name: name,
                    description: description,
                    icon: selectedChatRoomIcon
                });
                
                if (success) {
                    showNotification('„ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†„ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„Åü');
                } else {
                    showNotification('Êõ¥Êñ∞„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                }
            } else {
                // Êñ∞Ë¶èËøΩÂä†
                const newRoom = {
                    name: name,
                    description: description,
                    icon: selectedChatRoomIcon,
                    createdBy: user.uid
                };
                
                const savedRoom = await ChatRoomManager.addChatRoom(newRoom);
                if (savedRoom) {
                    showNotification('„ÉÅ„É£„ÉÉ„Éà„É´„Éº„É†„ÇíËøΩÂä†„Åó„Åæ„Åó„Åü');
                } else {
                    showNotification('ËøΩÂä†„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                }
            }
            
            closeChatRoomModal();
            loadChat();
        }
        
        // „Éó„É≠„Éï„Ç£„Éº„É´Ë°®Á§∫
        async function showProfile() {
            const modal = document.getElementById('profileModal');
            const user = UserDataManager.getCurrentUser();
            
            if (!user) {
                showNotification('Ë™çË®º„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }
            
            const userData = await UserDataManager.getUserData(user.uid);
            if (!userData) {
                showNotification('„É¶„Éº„Ç∂„Éº„Éá„Éº„Çø„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                return;
            }
            
            // „Éó„É≠„Éï„Ç£„Éº„É´ÊÉÖÂ†±„ÇíÊõ¥Êñ∞
            document.getElementById('profileAvatar').src = userData.avatar;
            document.getElementById('profileName').textContent = userData.name;
            document.getElementById('profileUsername').textContent = `@${userData.username}`;
            document.getElementById('profileBio').textContent = userData.bio || 'Ëá™Â∑±Á¥π‰ªãÊñá„Åå„ÅÇ„Çä„Åæ„Åõ„Çì';
            
            // Áµ±Ë®àÊÉÖÂ†±„ÇíÊõ¥Êñ∞
            document.getElementById('profilePostsCount').textContent = userData.postsCount || 0;
            
            const following = await UserDataManager.getFollowing(user.uid);
            const followers = await UserDataManager.getFollowers(user.uid);
            
            document.getElementById('profileFollowingCount').textContent = following.length;
            document.getElementById('profileFollowersCount').textContent = followers.length;
            
            // testPiÊÆãÈ´ò„ÇíË°®Á§∫
            document.getElementById('profileTotalPi').textContent = (userData.piBalance || 0).toFixed(2);
            
            // „Éó„É≠„Éï„Ç£„Éº„É´„Çø„Éñ„ÇíË°®Á§∫
            switchProfileTab('posts');
            
            modal.classList.remove('hidden');
        }
        
        // „Éó„É≠„Éï„Ç£„Éº„É´„ÇíÈñâ„Åò„Çã
        function closeProfile() {
            document.getElementById('profileModal').classList.add('hidden');
        }
        
        // „Éó„É≠„Éï„Ç£„Éº„É´Á∑®ÈõÜË°®Á§∫
        async function showProfileEdit() {
            const modal = document.getElementById('profileEditModal');
            const user = UserDataManager.getCurrentUser();
            
            if (!user) {
                showNotification('Ë™çË®º„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }
            
            const userData = await UserDataManager.getUserData(user.uid);
            if (!userData) {
                showNotification('„É¶„Éº„Ç∂„Éº„Éá„Éº„Çø„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                return;
            }
            
            // ÁèæÂú®„ÅÆ„Éó„É≠„Éï„Ç£„Éº„É´ÊÉÖÂ†±„ÇíË®≠ÂÆö
            document.getElementById('editProfileAvatar').src = userData.avatar;
            document.getElementById('editName').value = userData.name;
            document.getElementById('editUsername').value = userData.username;
            document.getElementById('editBio').value = userData.bio || '';
            
            modal.classList.remove('hidden');
        }
        
        // „Éó„É≠„Éï„Ç£„Éº„É´Á∑®ÈõÜ„ÇíÈñâ„Åò„Çã
        function closeProfileEdit() {
            document.getElementById('profileEditModal').classList.add('hidden');
        }
        
        // „Ç¢„Éê„Çø„ÉºÁîªÂÉè„Éó„É¨„Éì„É•„Éº
        function previewAvatar(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('editProfileAvatar').src = e.target.result;
                };
                reader.readAsDataURL(input.files[0]);
            }
        }
        
        // „Éó„É≠„Éï„Ç£„Éº„É´Á∑®ÈõÜ‰øùÂ≠ò
        async function saveProfileEdit() {
            const user = UserDataManager.getCurrentUser();
            if (!user) {
                showNotification('Ë™çË®º„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }
            
            const name = document.getElementById('editName').value.trim();
            const username = document.getElementById('editUsername').value.trim();
            const bio = document.getElementById('editBio').value.trim();
            const avatarFile = document.getElementById('avatarUpload').files[0];
            
            if (!name) {
                showNotification('ÂêçÂâç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            if (!username) {
                showNotification('„É¶„Éº„Ç∂„ÉºÂêç„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            let avatarUrl = null;
            
            // „Ç¢„Éê„Çø„ÉºÁîªÂÉè„Åå„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Åï„Çå„ÅüÂ†¥Âêà
            if (avatarFile) {
                try {
                    const fileName = `${user.uid}_avatar_${Date.now()}`;
                    const storageRef = storage.ref(`avatars/${fileName}`);
                    const snapshot = await storageRef.put(avatarFile);
                    avatarUrl = await snapshot.ref.getDownloadURL();
                } catch (error) {
                    console.error('Error uploading avatar:', error);
                    showNotification('„Ç¢„Éê„Çø„Éº„ÅÆ„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                    return;
                }
            }
            
            // „É¶„Éº„Ç∂„Éº„Éá„Éº„Çø„ÇíÊõ¥Êñ∞
            const updates = {
                name: name,
                username: username,
                bio: bio
            };
            
            if (avatarUrl) {
                updates.avatar = avatarUrl;
            }
            
            const success = await UserDataManager.updateUserData(user.uid, updates);
            
            if (success) {
                // UI„ÇíÊõ¥Êñ∞
                const updatedUserData = await UserDataManager.getUserData(user.uid);
                updateUserInfo(updatedUserData);
                showProfile();
                
                showNotification('„Éó„É≠„Éï„Ç£„Éº„É´„ÇíÊõ¥Êñ∞„Åó„Åæ„Åó„Åü');
            } else {
                showNotification('„Éó„É≠„Éï„Ç£„Éº„É´„ÅÆÊõ¥Êñ∞„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
            }
            
            closeProfileEdit();
        }
        
        // „Éó„É≠„Éï„Ç£„Éº„É´„Çø„ÉñÂàá„ÇäÊõø„Åà
        async function switchProfileTab(tabName) {
            // „Åô„Åπ„Å¶„ÅÆ„Éó„É≠„Éï„Ç£„Éº„É´„Çø„Éñ„Åã„Çâ„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„ÇØ„É©„Çπ„ÇíÂâäÈô§
            document.querySelectorAll('.profile-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // ÈÅ∏Êäû„Åó„Åü„Çø„Éñ„Å´„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„ÇØ„É©„Çπ„ÇíËøΩÂä†
            const activeTab = document.querySelector(`[data-profile-tab="${tabName}"]`);
            if (activeTab) {
                activeTab.classList.add('active');
            }
            
            // „Éó„É≠„Éï„Ç£„Éº„É´„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÇíÊõ¥Êñ∞
            const profileContent = document.getElementById('profileContent');
            profileContent.innerHTML = '';
            
            const user = UserDataManager.getCurrentUser();
            if (!user) {
                return;
            }
            
            const userData = await UserDataManager.getUserData(user.uid);
            if (!userData) {
                return;
            }
            
            if (tabName === 'posts') {
                // ÊäïÁ®ø„Çø„Éñ
                const posts = await PostManager.getPosts();
                const userPosts = posts.filter(post => post.userId === user.uid);
                
                if (userPosts.length === 0) {
                    profileContent.innerHTML = `
                        <div class="glass-effect rounded-2xl p-8 text-center">
                            <p class="text-white/70">„Åæ„Å†ÊäïÁ®ø„Åå„ÅÇ„Çä„Åæ„Åõ„Çì</p>
                        </div>
                    `;
                } else {
                    userPosts.forEach(post => {
                        const postElement = document.createElement('div');
                        postElement.className = 'glass-effect rounded-2xl p-4';
                        
                        const timeAgo = getTimeAgo(post.createdAt);
                        
                        postElement.innerHTML = `
                            <div class="flex items-start gap-3">
                                <img src="${post.userAvatar}" alt="User" class="w-10 h-10 rounded-full">
                                <div class="flex-1">
                                    <div class="flex items-center gap-2 mb-1">
                                        <h4 class="font-semibold text-white">${post.userName}</h4>
                                        <span class="text-xs text-white/60">${timeAgo}</span>
                                    </div>
                                    <p class="text-white/90">${post.content}</p>
                                </div>
                            </div>
                        `;
                        
                        profileContent.appendChild(postElement);
                    });
                }
            } else if (tabName === 'following') {
                // „Éï„Ç©„É≠„Éº„Çø„Éñ
                const following = await UserDataManager.getFollowing(user.uid);
                
                if (following.length === 0) {
                    profileContent.innerHTML = `
                        <div class="glass-effect rounded-2xl p-8 text-center">
                            <p class="text-white/70">„Éï„Ç©„É≠„Éº„Åó„Å¶„ÅÑ„Çã„É¶„Éº„Ç∂„Éº„Åå„ÅÑ„Åæ„Åõ„Çì</p>
                        </div>
                    `;
                } else {
                    for (const userId of following) {
                        const userCard = await createUserCard(userId);
                        profileContent.appendChild(userCard);
                    }
                }
            } else if (tabName === 'followers') {
                // „Éï„Ç©„É≠„ÉØ„Éº„Çø„Éñ
                const followers = await UserDataManager.getFollowers(user.uid);
                
                if (followers.length === 0) {
                    profileContent.innerHTML = `
                        <div class="glass-effect rounded-2xl p-8 text-center">
                            <p class="text-white/70">„Éï„Ç©„É≠„ÉØ„Éº„Åå„ÅÑ„Åæ„Åõ„Çì</p>
                        </div>
                    `;
                } else {
                    for (const userId of followers) {
                        const userCard = await createUserCard(userId);
                        profileContent.appendChild(userCard);
                    }
                }
            }
        }
        
        // „É¶„Éº„Ç∂„Éº„Ç´„Éº„Éâ„Çí‰ΩúÊàê
        async function createUserCard(userId) {
            const userCard = document.createElement('div');
            userCard.className = 'user-card';
            
            // „É¶„Éº„Ç∂„ÉºÊÉÖÂ†±„ÇíÂèñÂæó
            const userData = await UserDataManager.getUserData(userId);
            
            if (!userData) {
                userCard.innerHTML = `
                    <div class="flex items-center gap-3">
                        <img src="https://picsum.photos/seed/${userId}/50/50.jpg" alt="User" class="w-12 h-12 rounded-full">
                        <div class="user-card-info">
                            <h4>„É¶„Éº„Ç∂„Éº${userId}</h4>
                            <p>@user${userId}</p>
                        </div>
                    </div>
                `;
                return userCard;
            }
            
            const currentUser = UserDataManager.getCurrentUser();
            const isFollowing = currentUser && await UserDataManager.isFollowing(currentUser.uid, userId);
            const isOwnUser = currentUser && currentUser.uid === userId;
            
            userCard.innerHTML = `
                <img src="${userData.avatar}" alt="${userData.name}">
                <div class="user-card-info">
                    <h4>${userData.name}</h4>
                    <p>@${userData.username}</p>
                </div>
                ${!isOwnUser ? `
                    <button class="follow-btn ${isFollowing ? 'following' : 'not-following'}" 
                            onclick="toggleFollow('${userId}')">
                        ${isFollowing ? '„Éï„Ç©„É≠„Éº‰∏≠' : '„Éï„Ç©„É≠„Éº'}
                    </button>
                ` : ''}
            `;
            
            return userCard;
        }
        
        // „Éï„Ç©„É≠„Éº/„Éï„Ç©„É≠„ÉºËß£Èô§Âàá„ÇäÊõø„Åà
        async function toggleFollow(targetUserId) {
            const currentUser = UserDataManager.getCurrentUser();
            if (!currentUser) {
                showNotification('Ë™çË®º„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }
            
            const isFollowing = await UserDataManager.isFollowing(currentUser.uid, targetUserId);
            
            if (isFollowing) {
                // „Éï„Ç©„É≠„ÉºËß£Èô§
                const success = await UserDataManager.removeFollowing(currentUser.uid, targetUserId);
                if (success) {
                    // UI„ÇíÊõ¥Êñ∞
                    const button = event.target;
                    button.textContent = '„Éï„Ç©„É≠„Éº';
                    button.classList.remove('following');
                    button.classList.add('not-following');
                    
                    showNotification('„Éï„Ç©„É≠„Éº„ÇíËß£Èô§„Åó„Åæ„Åó„Åü');
                }
            } else {
                // „Éï„Ç©„É≠„Éº
                const success = await UserDataManager.addFollowing(currentUser.uid, targetUserId);
                if (success) {
                    // UI„ÇíÊõ¥Êñ∞
                    const button = event.target;
                    button.textContent = '„Éï„Ç©„É≠„Éº‰∏≠';
                    button.classList.remove('not-following');
                    button.classList.add('following');
                    
                    showNotification('„Éï„Ç©„É≠„Éº„Åó„Åæ„Åó„Åü');
                }
            }
            
            // „Éó„É≠„Éï„Ç£„Éº„É´ÁîªÈù¢„ÇíÊõ¥Êñ∞
            showProfile();
        }
        
        // „É¶„Éº„Ç∂„Éº„É™„Çπ„ÉàË°®Á§∫
        async function showUserList(type) {
            const modal = document.getElementById('userListModal');
            const userListContainer = document.getElementById('userList');
            const currentUser = UserDataManager.getCurrentUser();
            
            if (!currentUser) {
                showNotification('Ë™çË®º„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }
            
            let users = [];
            let title = '';
            
            if (type === 'following') {
                users = await UserDataManager.getFollowing(currentUser.uid);
                title = '„Éï„Ç©„É≠„Éº‰∏≠';
            } else if (type === 'followers') {
                users = await UserDataManager.getFollowers(currentUser.uid);
                title = '„Éï„Ç©„É≠„ÉØ„Éº';
            }
            
            document.getElementById('userListTitle').textContent = title;
            userListContainer.innerHTML = '';
            
            if (users.length === 0) {
                userListContainer.innerHTML = `
                    <div class="glass-effect rounded-2xl p-8 text-center">
                        <p class="text-white/70">${title}„Åå„ÅÑ„Åæ„Åõ„Çì</p>
                    </div>
                `;
            } else {
                for (const userId of users) {
                    const userCard = await createUserCard(userId);
                    userListContainer.appendChild(userCard);
                }
            }
            
            modal.classList.remove('hidden');
        }
        
        // „É¶„Éº„Ç∂„Éº„É™„Çπ„Éà„ÇíÈñâ„Åò„Çã
        function closeUserList() {
            document.getElementById('userListModal').classList.add('hidden');
        }
        
        // „Éà„Éî„ÉÉ„ÇØ„É´„Éº„É†„ÇíÈñã„Åè
        function openTopicRoom(topicId) {
            const modal = document.getElementById('topicRoomModal');
            
            // „Éà„Éî„ÉÉ„ÇØ„É´„Éº„É†ÊÉÖÂ†±„ÇíË®≠ÂÆö
            const topicNames = {
                'pi-price': 'Pi‰æ°Ê†º',
                'mining': '„Éû„Ç§„Éã„É≥„Ç∞',
                'ecosystem': '„Ç®„Ç≥„Ç∑„Çπ„ÉÜ„É†',
                'future': 'Êú™Êù•‰∫àÊ∏¨',
                'market': 'Â∏ÇÂ†¥ÂàÜÊûê',
                'ideas': '„Ç¢„Ç§„Éá„Ç¢‰∫§Êèõ'
            };
            
            document.getElementById('topicRoomTitle').textContent = topicNames[topicId] || '„Éà„Éî„ÉÉ„ÇØ„É´„Éº„É†';
            
            modal.classList.remove('hidden');
        }
        
        // „Éà„Éî„ÉÉ„ÇØ„É´„Éº„É†„ÇíÈñâ„Åò„Çã
        function closeTopicRoom() {
            document.getElementById('topicRoomModal').classList.add('hidden');
        }
        
        // „Éà„Éî„ÉÉ„ÇØ„Å´ÊäïÁ®ø
        async function postToTopic() {
            const input = document.getElementById('topicRoomInput');
            const content = input.value.trim();
            
            if (!content) {
                showNotification('ÊäïÁ®øÂÜÖÂÆπ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            const user = UserDataManager.getCurrentUser();
            if (!user) {
                showNotification('Ë™çË®º„ÅåÂøÖË¶Å„Åß„Åô');
                return;
            }
            
            const userData = await UserDataManager.getUserData(user.uid);
            if (!userData) {
                showNotification('„É¶„Éº„Ç∂„Éº„Éá„Éº„Çø„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü');
                return;
            }
            
            // ÊäïÁ®ø„Çí‰ΩúÊàê
            const post = {
                userId: user.uid,
                userName: userData.name,
                userAvatar: userData.avatar,
                content: content,
                timestamp: new Date().toISOString()
            };
            
            // UI„Å´ÊäïÁ®ø„ÇíËøΩÂä†
            addTopicPostToUI(post);
            
            // ÂÖ•Âäõ„Çí„ÇØ„É™„Ç¢
            input.value = '';
            
            // testPi„Çí‰ªò‰∏é
            const rewardAmount = 0.2;
            await updatePiBalance(rewardAmount);
            showRewardPopup(rewardAmount);
            
            showNotification('ÊäïÁ®ø„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü');
        }
        
        // „Éà„Éî„ÉÉ„ÇØÊäïÁ®ø„ÇíUI„Å´ËøΩÂä†
        function addTopicPostToUI(post) {
            const postsContainer = document.getElementById('topicRoomPosts');
            const postElement = document.createElement('div');
            postElement.className = 'glass-effect rounded-2xl p-4';
            
            const timeAgo = getTimeAgo(new Date(post.timestamp));
            
            postElement.innerHTML = `
                <div class="flex items-start gap-3">
                    <img src="${post.userAvatar}" alt="User" class="w-10 h-10 rounded-full">
                    <div class="flex-1">
                        <div class="flex items-center gap-2 mb-1">
                            <h4 class="font-semibold text-white">${post.userName}</h4>
                            <span class="text-xs text-white/60">${timeAgo}</span>
                        </div>
                        <p class="text-white/90">${post.content}</p>
                    </div>
                </div>
            `;
            
            postsContainer.insertBefore(postElement, postsContainer.firstChild);
        }
        
        // „Éï„Ç£„Éº„ÉâË™≠„ÅøËæº„Åø
        async function loadFeed() {
            const posts = await PostManager.getPosts();
            const feedContainer = document.getElementById('feed');
            
            // Êó¢Â≠ò„ÅÆ„Éï„Ç£„Éº„Éâ„Çí„ÇØ„É™„Ç¢Ôºà„Éá„É¢ÊäïÁ®ø‰ª•Â§ñÔºâ
            const demoPosts = feedContainer.querySelectorAll('.post-card');
            demoPosts.forEach(post => post.remove());
            
            if (posts.length === 0) {
                // „Éá„É¢Áî®„ÅÆÊäïÁ®ø„ÇíË°®Á§∫
                return;
            }
            
            posts.forEach(post => {
                addPostToUI(post);
            });
        }
        
        // „Éà„Éî„ÉÉ„ÇØË™≠„ÅøËæº„Åø
        function loadTopics() {
            // „Éà„Éî„ÉÉ„ÇØ„ÅØÈùôÁöÑ„Å™„ÅÆ„Åß‰Ωï„ÇÇ„Åó„Å™„ÅÑ
        }
        
        // ÂàùÊúü„Éá„Éº„ÇøË™≠„ÅøËæº„Åø
        function loadInitialData() {
            // „Éã„É•„Éº„Çπ„ÇíË™≠„ÅøËæº„ÇÄ
            loadNews();
            
            // „ÉÅ„É£„ÉÉ„Éà„ÇíË™≠„ÅøËæº„ÇÄ
            loadChat();
            
            // „Éï„Ç£„Éº„Éâ„ÇíË™≠„ÅøËæº„ÇÄ
            loadFeed();
        }
        
        // Ë®ÄË™ûÂàá„ÇäÊõø„Åà
        function toggleLangSelector() {
            document.getElementById('langOverlay').classList.remove('hidden');
        }
        
        // Ê§úÁ¥¢Ê©üËÉΩ
        function searchNews() {
            const searchTerm = document.getElementById('newsSearch').value.trim();
            if (!searchTerm) {
                showNotification('Ê§úÁ¥¢„Ç≠„Éº„ÉØ„Éº„Éâ„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ');
                return;
            }
            
            showNotification(`„Äå${searchTerm}„Äç„ÅßÊ§úÁ¥¢„Åó„Åæ„Åó„Åü`);
            // ÂÆüÈöõ„ÅÆÊ§úÁ¥¢Âá¶ÁêÜ„ÇíÂÆüË£Ö
        }
        
        // „Éã„É•„Éº„Çπ„Éï„Ç£„É´„Çø„Éº
        function filterNews(category) {
            showNotification(`${getCategoryName(category)}„Åß„Éï„Ç£„É´„Çø„Éº„Åó„Åæ„Åó„Åü`);
            // ÂÆüÈöõ„ÅÆ„Éï„Ç£„É´„Çø„ÉºÂá¶ÁêÜ„ÇíÂÆüË£Ö
        }
        
        // „ÇΩ„Éº„Çπ„Éï„Ç£„É´„Çø„Éº
        function filterBySource(source) {
            showNotification(`${source}„Åß„Éï„Ç£„É´„Çø„Éº„Åó„Åæ„Åó„Åü`);
            // ÂÆüÈöõ„ÅÆ„Éï„Ç£„É´„Çø„ÉºÂá¶ÁêÜ„ÇíÂÆüË£Ö
        }
        
        // „É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£Èñ¢Êï∞
        function generateId() {
            return Date.now().toString(36) + Math.random().toString(36).substr(2);
        }
        
        function getTimeAgo(date) {
            const seconds = Math.floor((new Date() - date) / 1000);
            
            let interval = Math.floor(seconds / 31536000);
            if (interval >= 1) {
                return interval + "Âπ¥Ââç";
            }
            
            interval = Math.floor(seconds / 2592000);
            if (interval >= 1) {
                return interval + "„É∂ÊúàÂâç";
            }
            
            interval = Math.floor(seconds / 86400);
            if (interval >= 1) {
                return interval + "Êó•Ââç";
            }
            
            interval = Math.floor(seconds / 3600);
            if (interval >= 1) {
                return interval + "ÊôÇÈñìÂâç";
            }
            
            interval = Math.floor(seconds / 60);
            if (interval >= 1) {
                return interval + "ÂàÜÂâç";
            }
            
            return "„Åü„Å£„Åü‰ªä";
        }
        
        function formatTime(date) {
            return new Date(date).toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' });
        }
        
        function formatNumber(num) {
            if (num >= 1000000) {
                return (num / 1000000).toFixed(1) + 'M';
            } else if (num >= 1000) {
                return (num / 1000).toFixed(1) + 'K';
            }
            return num.toString();
        }
        
        function getCategoryName(category) {
            const categories = {
                'update': '„Ç¢„ÉÉ„Éó„Éá„Éº„Éà',
                'price': '‰æ°Ê†º',
                'partnership': 'ÊèêÊê∫',
                'community': '„Ç≥„Éü„É•„Éã„ÉÜ„Ç£'
            };
            return categories[category] || '„Åù„ÅÆ‰ªñ';
        }
        
        function getCredibilityColor(score) {
            if (score >= 80) {
                return 'text-green-400';
            } else if (score >= 50) {
                return 'text-yellow-400';
            } else {
                return 'text-red-400';
            }
        }
        
        function showNotification(message) {
            // Á∞°ÊòìÁöÑ„Å™ÈÄöÁü•Ë°®Á§∫
            const notification = document.createElement('div');
            notification.className = 'fixed top-20 right-4 glass-effect rounded-2xl px-4 py-3 text-white z-50';
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.transition = 'opacity 0.5s';
                notification.style.opacity = '0';
                
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 500);
            }, 3000);
        }
        
        // „Éö„Éº„Ç∏Ë™≠„ÅøËæº„ÅøÊôÇ„ÅÆÂá¶ÁêÜ
        document.addEventListener('DOMContentLoaded', () => {
            // Ë®ÄË™ûÈÅ∏ÊäûUI„ÇíÂàùÊúüÂåñ
            const langContainer = document.querySelector('#langOverlay .grid');
            langContainer.innerHTML = '';
            
            languages.forEach(lang => {
                const button = document.createElement('button');
                button.className = 'glass-effect rounded-xl p-3 text-white hover:bg-white/20 smooth-transition';
                button.innerHTML = `${lang.flag} ${lang.name}`;
                button.onclick = () => selectLanguage(lang.code);
                langContainer.appendChild(button);
            });
            
            // „Éâ„É©„ÉÉ„Ç∞ÔºÜ„Éâ„É≠„ÉÉ„ÉóÊ©üËÉΩ
            const videoDropZone = document.getElementById('videoDropZone');
            
            ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
                videoDropZone.addEventListener(eventName, preventDefaults, false);
            });
            
            function preventDefaults(e) {
                e.preventDefault();
                e.stopPropagation();
            }
            
            ['dragenter', 'dragover'].forEach(eventName => {
                videoDropZone.addEventListener(eventName, highlight, false);
            });
            
            ['dragleave', 'drop'].forEach(eventName => {
                videoDropZone.addEventListener(eventName, unhighlight, false);
            });
            
            function highlight() {
                videoDropZone.classList.add('bg-white/10');
            }
            
            function unhighlight() {
                videoDropZone.classList.remove('bg-white/10');
            }
            
            videoDropZone.addEventListener('drop', handleDrop, false);
            
            function handleDrop(e) {
                const dt = e.dataTransfer;
                const files = dt.files;
                
                if (files.length > 0) {
                    document.getElementById('videoUpload').files = files;
                    handleVideoUpload({ target: { files: files } });
                }
            }
        });
        
        // UIÊõ¥Êñ∞Èñ¢Êï∞
        function updateUILanguage(langCode) {
            // Ë®ÄË™û„Å´Âøú„Åò„ÅüUIÊõ¥Êñ∞„ÇíÂÆüË£Ö
            console.log(`Language updated to: ${langCode}`);
        }
    </script>
</body>
</html>
